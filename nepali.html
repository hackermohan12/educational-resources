<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sahitya Flashcards (Nepali & English) - Enhanced</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>
    <style>
        /* Basic styling for the body */
        body {
            font-family: 'Poppins', sans-serif; /* Use Poppins */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); /* Subtle gradient background */
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
            color: #333; /* Default text color */
        }

        /* Heading style */
        h1 {
            color: #2c3e50; /* Darker blue-grey */
            margin-bottom: 20px; /* More space */
            text-align: center;
            font-size: 1.8em; /* Slightly larger */
            font-weight: 600; /* Bolder */
        }

        /* Control groups container */
        .controls-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px; /* Increased gap */
            margin-bottom: 20px; /* More space below controls */
        }

        /* Language/Mode selection container */
        .selection-group {
             display: flex;
             gap: 10px;
             justify-content: center;
             flex-wrap: wrap; /* Allow wrapping */
        }

        /* Refined Button Styling (Language and Mode) */
        .control-button {
            padding: 8px 16px; /* Slightly larger padding */
            font-size: 0.9em;
            cursor: pointer;
            border: 1px solid #bdc3c7; /* Softer border */
            border-radius: 20px; /* Rounded pill shape */
            background-color: #fff;
            color: #34495e; /* Darker text */
            transition: all 0.3s ease; /* Smooth transition for all properties */
            margin: 3px;
        }
        .control-button.active {
            background-color: #3498db; /* Brighter blue for active */
            color: white;
            border-color: #3498db;
            font-weight: 600;
            box-shadow: 0 2px 5px rgba(52, 152, 219, 0.3); /* Subtle shadow */
        }
        .control-button:hover:not(.active) {
            background-color: #ecf0f1; /* Light hover */
            border-color: #95a5a6;
            transform: translateY(-1px); /* Slight lift on hover */
        }

        /* Styling for Radio Button Toggles (Show Mode) */
        .show-mode-selector {
            display: inline-block; /* Keep inline-block */
            border: 1px solid #bdc3c7; /* Match control button border */
            border-radius: 20px; /* Match pill shape */
            overflow: hidden; /* Keep rounded corners */
            background-color: #fff; /* Background for the container */
        }
        .show-mode-selector label {
            display: inline-block; /* Make labels sit side-by-side */
            padding: 8px 16px;
            font-size: 0.9em;
            cursor: pointer;
            color: #34495e;
            transition: all 0.3s ease;
            border-right: 1px solid #ecf0f1; /* Lighter separator */
        }
         .show-mode-selector label:last-child {
             border-right: none; /* Remove border from last label */
         }
        .show-mode-selector input[type="radio"] {
            display: none; /* Hide actual radio buttons */
        }
        .show-mode-selector input[type="radio"]:checked + label {
            background-color: #2ecc71; /* Green for active mode */
            color: white;
            font-weight: 600;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1); /* Inner shadow for active */
        }


        /* The main card container */
        .flashcard-container {
            width: 90%;
            max-width: 700px; /* Slightly wider */
            background-color: #ffffff;
            border-radius: 15px; /* More rounded */
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1); /* Softer, larger shadow */
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-height: 450px; /* Slightly taller */
            transition: transform 0.3s ease, box-shadow 0.3s ease; /* Add transition */
            position: relative; /* Needed for absolute positioning of counter */
        }
        .flashcard-container:hover {
             box-shadow: 0 12px 35px rgba(0, 0, 0, 0.12); /* Enhance shadow on hover */
             transform: translateY(-3px); /* Slight lift effect */
        }

        /* Card Header */
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 25px; /* More padding */
            border-bottom: 1px solid #ecf0f1; /* Lighter border */
            font-size: 0.95em;
            color: #7f8c8d; /* Softer grey */
        }
        .card-header .hint, .card-header .star {
            cursor: pointer; display: flex; align-items: center; gap: 6px; transition: color 0.3s ease;
        }
        .card-header .hint:hover, .card-header .star:hover {
            color: #3498db; /* Blue hover */
        }
        .card-header .star { font-size: 1.4em; color: #bdc3c7; } /* Lighter grey default star */
        .card-header .star.favorited { color: #f1c40f; } /* Gold favorite */

        /* Card Body (Main content area) */
        .card-body {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px 25px; /* More vertical padding */
            text-align: center;
            font-size: 1.6em; /* Slightly larger question */
            cursor: pointer;
            min-height: 220px; /* Ensure minimum height */
            line-height: 1.5; /* More spacing */
            overflow-y: auto; /* Allow scrolling for long content */
            color: #2c3e50; /* Darker text */
        }
        /* Styling when answer/summary is shown */
        .card-body.answer-visible {
            font-size: 1em; /* Consistent answer font size */
            text-align: left;
            align-items: flex-start; /* Align content top-left */
            justify-content: flex-start;
        }
         /* Specific styling for summary view */
         .card-body.summary-view {
            line-height: 1.6; /* More line height for summaries */
            white-space: pre-wrap; /* Respect line breaks in summary data */
         }

        .card-body strong { /* Author/Chars label */
            display: block; margin-bottom: 10px; color: #3498db; font-weight: 600; font-size: 1.1em;
        }
        .card-body ul { /* Author/Chars list */
            margin-top: 8px; padding-left: 25px; margin-bottom: 0; list-style-type: disc;
        }
        .card-body li { margin-bottom: 6px; }

        /* Card Footer */
        .card-footer {
            padding: 20px 25px;
            border-top: 1px solid #ecf0f1;
            background-color: #f8f9f9; /* Very light grey */
            display: flex;
            justify-content: center; /* Center the confidence buttons */
            align-items: center;
            min-height: 60px; /* Ensure footer has height */
            position: relative; /* Context for absolute positioning */
        }

        /* Card Counter - Repositioned */
         .card-counter {
             position: absolute;
             bottom: 5px; /* Position at the very bottom */
             left: 25px;
             font-size: 0.85em; /* Smaller */
             color: #95a5a6; /* Lighter grey */
         }

        /* Confidence Buttons Container */
        .confidence-buttons {
            display: flex; /* Managed by JS (flex or none) */
            gap: 15px;
            width: 100%;
            max-width: 450px; /* Limit width of button group */
            justify-content: space-around;
        }

        /* Styling for individual Confidence Buttons */
        .confidence-button {
            padding: 12px 20px; /* Adjusted padding */
            font-size: 0.95em; /* Adjusted font size */
            font-weight: 600;
            cursor: pointer;
            border: none;
            border-radius: 25px; /* Pill shape */
            transition: all 0.3s ease;
            flex-grow: 1; /* Allow buttons to grow */
            max-width: 200px; /* Max width per button */
            text-align: center;
            color: white; /* White text for both */
        }

        .confidence-button.try-again {
            background-color: #e74c3c; /* Red */
            box-shadow: 0 3px 8px rgba(231, 76, 60, 0.3);
        }
        .confidence-button.try-again:hover {
            background-color: #c0392b; /* Darker red */
            box-shadow: 0 5px 12px rgba(192, 57, 43, 0.4);
            transform: translateY(-2px);
        }

        .confidence-button.confident {
            background-color: #2ecc71; /* Green */
            box-shadow: 0 3px 8px rgba(46, 204, 113, 0.3);
        }
        .confidence-button.confident:hover {
            background-color: #27ae60; /* Darker green */
            box-shadow: 0 5px 12px rgba(39, 174, 96, 0.4);
            transform: translateY(-2px);
        }

        /* Optional: Other Footer Controls (e.g., Fullscreen) */
        .footer-controls-right {
            position: absolute;
            right: 25px;
            bottom: 18px; /* Align vertically */
            display: flex;
            gap: 10px; /* Space between icons */
        }
        .action-button {
            background: none;
            border: none;
            font-size: 1.5em; /* Icon size */
            cursor: pointer;
            color: #95a5a6; /* Lighter icon color */
            padding: 8px;
            line-height: 1;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        .action-button:hover {
            color: #34495e; /* Darker on hover */
            background-color: #ecf0f1; /* Light background circle on hover */
        }

        /* Hide elements we don't need anymore */
        #progress-toggle, #play-button, #settings-button, #prev-button, #next-button {
             /* display: none; */ /* Uncomment if you are sure you don't need them */
             /* For now, let's hide the original nav buttons explicitly */
             /* We'll keep fullscreen, hint, star */
        }
         #prev-button, #next-button { display: none; } /* Hide original nav */


    </style>
</head>
<body>

    <h1>Summaries and Chapters Name</h1>

    <div class="controls-container">
        <div class="selection-group language-selector">
            <button id="lang-ne" class="control-button">рдиреЗрдкрд╛рд▓реА</button>
            <button id="lang-en" class="control-button">English</button>
        </div>
        <div class="selection-group show-mode-selector">
            <input type="radio" id="show-author-chars" name="showMode" value="authorChars" checked>
            <label for="show-author-chars" class="control-button">Author & Characters</label>

            <input type="radio" id="show-summary" name="showMode" value="summary">
            <label for="show-summary" class="control-button">Summary</label>
        </div>
    </div>


    <div class="flashcard-container">
        <div class="card-header">
            <div class="hint" id="hint-button" title="Get a hint">ЁЯТб Hint</div>
            <div class="star" id="star-button" title="Mark as favorite">тШЕ</div>
        </div>

        <div class="card-body" id="card-body">
            </div>

        <div class="card-footer">
            <div class="card-counter" id="card-counter">1 / N</div>

            <div class="confidence-buttons" id="confidence-controls" style="display: none;">
                <button id="try-again-button" class="confidence-button try-again">Try Again</button>
                <button id="confident-button" class="confidence-button confident">I'm Confident</button>
            </div>

            <div class="footer-controls-right">
                  <button id="fullscreen-button" class="action-button" title="Toggle Fullscreen">тЫ╢</button>
                  </div>
        </div>
    </div>

    <script>
        // --- Data ---
        // (Keep the flashcardsDataNe and flashcardsDataEn arrays exactly as they were in the original file)
        const flashcardsDataNe = [
             { id: "ne0", chapterName: "рдкрд╛рда рез: рдЖрдорд╛рдХреЛ рд╕рдкрдирд╛", author: "рдЧреЛрдкрд╛рд▓рдкреНрд░рд╕рд╛рдж рд░рд┐рдорд╛рд▓", characters: ["рдЖрдорд╛ (Symbolic for Nepal)", "рдЫреЛрд░рд╛ (Symbolic for Nepali people)"], summary: `рдпреЛ рдХрд╡рд┐рддрд╛ рдЧреЛрдкрд╛рд▓рдкреНрд░рд╕рд╛рдж рд░рд┐рдорд╛рд▓рд▓реЗ рд▓реЗрдЦреНрдиреБрднрдПрдХреЛ рд╣реЛред рдпреЛ рд░рд╛рдгрд╛рд╢рд╛рд╕рдирдХреЛ рдЕрдиреНрдпрд╛рдп рд░ рдЕрддреНрдпрд╛рдЪрд╛рд░рдХреЛ рд╡рд┐рд░реЛрдзрдорд╛ рд╡рд┐.рд╕рдВ. резрепрепрен рддрд┐рд░ рд▓реЗрдЦрд┐рдПрдХреЛ рдерд┐рдпреЛред рджрд╢рд░рде рдЪрдиреНрдж, рд╢реБрдХреНрд░рд░рд╛рдЬ рд╢рд╛рд╕реНрддреНрд░реА, рдзрд░реНрдорднрдХреНрдд рдорд╛рдереЗрдорд╛, рдЧрдВрдЧрд╛рд▓рд╛рд▓ рд╢реНрд░реЗрд╖реНрда рдЬрд╕реНрддрд╛ рд╢рд╣реАрджрд╣рд░реВрдХреЛ рдмрд▓рд┐рджрд╛рдирдмрд╛рдЯ рдХрд╡рд┐ рдкреНрд░рднрд╛рд╡рд┐рдд рднрдПрд░ рдпреЛ рдХрд╡рд┐рддрд╛ рд▓реЗрдЦреЗрдХрд╛ рд╣реБрдиреНред рдХрд╡рд┐рддрд╛рдорд╛ рдиреЗрдкрд╛рд▓рд▓рд╛рдИ 'рдЖрдорд╛' рд░ рдиреЗрдкрд╛рд▓реА рдЬрдирддрд╛рд▓рд╛рдИ 'рдЫреЛрд░рд╛' рдХреЛ рд░реВрдкрдорд╛ рдкреНрд░рд╕реНрддреБрдд рдЧрд░рд┐рдПрдХреЛ рдЫред рдпреЛ рдЖрдорд╛ рд░ рдЫреЛрд░рд╛ рдмреАрдЪрдХреЛ рд╕рдВрд╡рд╛рджрдХреЛ рд░реВрдкрдорд╛ рдЫред рдЖрдорд╛ (рдиреЗрдкрд╛рд▓) рд▓реЗ рдЖрдлреНрдиреЛ рдЫреЛрд░рд╛ (рдиреЗрдкрд╛рд▓реА рдЬрдирддрд╛) рд▓рд╛рдИ рджреЗрд╢рдорд╛ рднрдЗрд░рд╣реЗрдХреЛ рдЕрдиреНрдпрд╛рдп рд░ рдЕрддреНрдпрд╛рдЪрд╛рд░ рд╣рдЯрд╛рдЙрди, рдкрд░рд┐рд╡рд░реНрддрди рд▓реНрдпрд╛рдЙрди рдХреНрд░рд╛рдиреНрддрд┐ рдЧрд░реНрдиреБрдкрд░реНрдЫ, рдЕрдШрд┐ рдмрдвреНтАМрдиреБрдкрд░реНрдЫ рднрдиреЗрд░ рдЖрдЧреНрд░рд╣ рдЧрд░реНрдЫрд┐рдиреНред рдЕрдиреНрдпрд╛рдп рд╣рдЯрд╛рдЙрди рд▓рдбреНрдиреИ рдкрд░реНрдЫред рдХреНрд░рд╛рдиреНрддрд┐ рд╡рд╛ рдкрд░рд┐рд╡рд░реНрддрди рдмрд┐рд╣рд╛рдирдХреЛ рд╕реВрд░реНрдп рдЬрд╕реНрддреИ рдЪрдореНрдХрд┐рд▓реЛ рд░ рд╣реБрд░реА рдЬрд╕реНрддреИ рдмрд▓рд┐рдпреЛ рднрдПрд░ рдЖрдЙрдБрдЫ, рдЬрд╕рд▓рд╛рдИ рдХрд╕реИрд▓реЗ рд░реЛрдХреНрди рд╕рдХреНрджреИрдиред рдХрд╡рд┐рддрд╛рд▓реЗ рд╕рд╛рд╣рд╕ рд░ рдирд┐рдбрд░рддрд╛рдХреЛ рдкреНрд░реЗрд░рдгрд╛ рджрд┐рдиреНрдЫред рдЖрдорд╛рд▓реЗ рдЫреЛрд░рд╛рд▓рд╛рдИ рдирдбрд░рд╛рдЙрди, рд╕рд╛рд╣рд╕реА рдмрдиреНрди рд░ рдЕрдиреНрдпрд╛рдпрд╡рд┐рд░реБрджреНрдз рд▓рдбреНрди рдкреНрд░реЗрд░рд┐рдд рдЧрд░реНрдЫрд┐рдиреНред рдбрд░рд╛рдПрд░ рдмрд╕реЗ рдХрд╣рд┐рд▓реНрдпреИ рд░рд╛рдореНрд░реЛ рд╕рдордп рдЖрдЙрдБрджреИрди, рддреНрдпрд╕реИрд▓реЗ рдЕрдиреНрдпрд╛рдпрдХреЛ рдЕрдЧрд╛рдбрд┐ рдХрд╣рд┐рд▓реНрдпреИ рдирдЭреБрдХреНрди рднрдирд┐рдПрдХреЛ рдЫред` },
             { id: "ne1", chapterName: "рдкрд╛рда реи: рд╡рд┐рд░рд╣рд┐рдгреА рджрдордпрдиреНрддреА", author: "рдорджрдирдордгрд┐ рджреАрдХреНрд╖рд┐рдд", characters: ["рджрдордпрдиреНрддреА", "рдирд▓ (рджрдордпрдиреНрддреАрдХрд╛ рд╢реНрд░реАрдорд╛рдиреН)", "рдкреБрд╖реНрдХрд░ (рдирд▓рдХрд╛ рднрд╛рдЗ)", "рдирд╛рдЧрд░рд╛рдЬ рдХрд░реНрдХрдЯреЛрдХ (рдХрд┐рд░рд╛рдд рд╕рд┐рдХрд╛рд░реА)"], summary: `рдпреЛ рдХрдерд╛ рдорджрдирдордгрд┐ рджреАрдХреНрд╖рд┐рддрд▓реЗ рд▓реЗрдЦреНрдиреБрднрдПрдХреЛ рд╣реЛред рдХрдерд╛рд▓реЗ рджрдордпрдиреНрддреАрдХреЛ рдЕрд╡рд╕реНрдерд╛ рд╡рд░реНрдгрди рдЧрд░реНрдЫ рдЬрдм рдЙрдирдХрд╛ рд╢реНрд░реАрдорд╛рдиреН рдирд▓ рдПрдХреНрдХрд╛рд╕реА рд╣рд░рд╛рдЙрдБрдЫрдиреНред рд╕реЛрдЪреНрдиреБрд╣реЛрд╕реН, рддрдкрд╛рдИрдВрд▓реЗ рдзреЗрд░реИ рдорд╛рдпрд╛ рдЧрд░реНрдиреЗ рдорд╛рдиреНрдЫреЗ рдПрдХреНрдХрд╛рд╕реА рд╣рд░рд╛рдпреЛ рднрдиреЗ рдХрд╕реНрддреЛ рд╣реБрдиреНрдЫ? рджрдордпрдиреНрддреА рдкрдирд┐ рдкрд╛рдЧрд▓ рдЬрд╕реНрддреИ рд╢реНрд░реАрдорд╛рдиреН рдЦреЛрдЬреНрджреИ рдШрдирд╛ рдЬрдВрдЧрд▓рдорд╛ рднреМрддрд╛рд░рд┐рдиреНрдЫрд┐рдиреНред рдЙрдирд▓реЗ рд░реБрдЦ, рдкрд╛рдд, рд▓рд╣рд░рд╛ рд╕рдмреИрд╕рдБрдЧ рд╢реНрд░реАрдорд╛рдиреН рдЦреЛрдЬрд┐рджрд┐рди рдЧреБрд╣рд╛рд░ рдорд╛рдЧреНрдЫрд┐рдиреНред рдердХрд┐рдд рднрдПрд░ рдкрд┐рдкрд▓рдХреЛ рд░реБрдЦрдореБрдирд┐ рд╕реБрддреНрджрд╛ рдЙрдирд▓реЗ рдирд▓рдХрд╛ рднрд╛рдЗ рдкреБрд╖реНрдХрд░ (рдкрд╣реЗрдВрд▓реЛ рдЖрдБрдЦрд╛, рд╕реЗрддреЛ рджрд╛рдБрдд рднрдПрдХреЛ) рд▓рд╛рдИ рд╕рдкрдирд╛рдорд╛ рджреЗрдЦреНрдЫрд┐рдиреНред рдмреНрдпреВрдБрдЭрд┐рдВрджрд╛ рдЙрдирд▓рд╛рдИ рдбрд░рд▓рд╛рдЧреНрджреЛ рдирд╛рдЧрд░рд╛рдЬ рдХрд░реНрдХрдЯреЛрдХ (рд╡рд╛ рдХрд┐рд░рд╛рдд рд╕рд┐рдХрд╛рд░реА) рд▓реЗ рд╕рдорд╛рддреЗрд░ рдЖрдлреНрдиреЛ рдЫрд╛рдкреНрд░реЛрдорд╛ рд▓рд╛рдиреНрдЫред рддрд░ рджрдордпрдиреНрддреА рдбрд░рд╛рдЙрдБрджрд┐рдирдиреН, рдмреБрджреНрдзрд┐ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░, рд╣рд╛рдБрд╕реЗрд░, рдореАрдареЛ рдмреЛрд▓реЗрд░ рд╕рд┐рдХрд╛рд░реАрд▓рд╛рдИ рдЭреБрдХреНрдпрд╛рдЙрдБрдЫрд┐рдиреНред рдЙрд╕рд▓рд╛рдИ рдЦрд╛рдирд╛ рдкрдХрд╛рдЙрди рд░ рдорджрд┐рд░рд╛ рдЦреБрд╡рд╛рдПрд░ рд▓рдареНрда рдкрд╛рд░реНрдЫрд┐рдиреН, рдЕрдирд┐ рдЖрдЧреЛ рд▓рдЧрд╛рдПрд░ рддреНрдпрд╣рд╛рдБрдмрд╛рдЯ рднрд╛рдЧреНрдЫрд┐рдиреНред рдЙрдирдХреЛ рд╕рдВрдШрд░реНрд╖ рд╕рдХрд┐рдБрджреИрди, рей рджрд┐рди рднреЛрдХреИ-рддрд┐рд░реНрдЦреЗ рд╣рд┐рдБрдбреЗрдкрдЫрд┐ рд╡реНрдпрд╛рдкрд╛рд░реАрд╣рд░реВрдХреЛ рд╕рдореВрд╣рд╕рдБрдЧ рднреЗрдЯ рд╣реБрдиреНрдЫ рд░ рдЖрд╢реНрд░рдп рдорд╛рдЧреНрдЫрд┐рдиреНред рддрд░ рд░рд╛рддрд┐ рдЬрдВрдЧрд▓реА рд╣рд╛рддреНрддреАрдХреЛ рдЖрдХреНрд░рдордгрдорд╛ рд╡реНрдпрд╛рдкрд╛рд░реАрд╣рд░реВ рдорд╛рд░рд┐рдиреНрдЫрдиреН, рджрдордпрдиреНрддреА рднрдиреЗ рдмрд╛рдБрдЪреНрдЫрд┐рдиреНред рдпрд╕ рдХрдерд╛рд▓реЗ рдирд╛рд░реАрд╣рд░реВ рдкреНрд░реЗрдордорд╛ рдорд╛рддреНрд░ рдирднрдИ рдЖрддреНрдордмрд▓, рдмреБрджреНрдзрд┐, рд╕рд╛рд╣рд╕ рд░ рд╕рдВрдШрд░реНрд╖рдорд╛ рдкрдирд┐ рдмрд▓рд┐рдпрд╛ рд╣реБрдиреНрдЫрдиреН, рд╕рдВрдХрдЯрдХреЛ рд╕рд╛рдордирд╛ рдЧрд░реНрди рд╕рдХреНрдЫрдиреН, рдЖрдлреНрдиреЛ рдЕрд╕реНрддрд┐рддреНрд╡ рд░ рд╕рдореНрдорд╛рди рдЬреЛрдЧрд╛рдЙрди рд╕рдХреНрд╖рдо рдЫрдиреН рднрдиреНрдиреЗ рджреЗрдЦрд╛рдЙрдБрдЫред рдирд╛рд░реАрд╣рд░реВ рдХрдордЬреЛрд░ рдЫреИрдирдиреН ред` },
             { id: "ne2", chapterName: "рдкрд╛рда рей: рдШрдирдШрд╕реНрдпрд╛рдХреЛ рдЙрдХрд╛рд▓реЛ рдХрд╛рдЯреНрддрд╛", author: "рддрд╛рд░рд╛рдирд╛рде рд╢рд░реНрдорд╛", characters: ["рддрд╛рд░рд╛рдирд╛рде рд╢рд░реНрдорд╛ (The narrator/traveler)"], summary: `рдпреЛ рддрд╛рд░рд╛рдирд╛рде рд╢рд░реНрдорд╛рдХреЛ рдирд┐рдпрд╛рддреНрд░рд╛ рд╣реЛред рд▓реЗрдЦрдХрд▓реЗ рдмреИрддрдбреА рд░ рдбрдбреЗрд▓рдзреБрд░рд╛рдХреЛ рдмреАрдЪрдорд╛ рдкрд░реНрдиреЗ рдШрдирдШрд╕реНрдпрд╛рдХреЛ рдЕрддреНрдпрдиреНрддреИ рдХрдард┐рди рд░ рджреБрд░реНрдЧрдо рдЙрдХрд╛рд▓реЛ рдпрд╛рддреНрд░рд╛рдХреЛ рд╡рд░реНрдгрди рдЧрд░реЗрдХрд╛ рдЫрдиреНред рдпрд╛рддреНрд░рд╛рдорд╛ рд╣рд░рд┐рдпрд╛рд▓реА рднрдП рдкрдирд┐ рдмрд╛рдЯреЛ рдЕрдкреНрдареНрдпрд╛рд░реЛ, рднреЛрдХ, рддрд┐рд░реНрдЦрд╛, рдердХрд╛рди рд░ рдЪрд┐рд╕реЛ рд╣рд╛рд╡рд╛ рдЬрд╕реНрддрд╛ рдЕрд╕реБрд╡рд┐рдзрд╛ рдерд┐рдПред рднрд╛рд░реА рдмреЛрдХреЗрд░ рд╣рд┐рдБрдбреНрдиреБрдкрд░реНрджрд╛рдХреЛ рдХрдард┐рдирд╛рдЗрдХреЛ рдХрд▓реНрдкрдирд╛ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред рд▓реЗрдЦрдХрд▓реЗ рд╕реБрджреВрд░рдкрд╢реНрдЪрд┐рдордХрд╛ рдЧрд╛рдЙрдБрд╣рд░реВрдХреЛ рдкрд┐рдЫрдбрд┐рдПрдХреЛ рдЕрд╡рд╕реНрдерд╛, рд╡рд┐рдХрд╛рд╕, рд╕реНрд╡рд╛рд╕реНрдереНрдп рд░ рд╢рд┐рдХреНрд╖рд╛рдХреЛ рдХрдореА рджреЗрдЦреЗрд░ рджреБрдГрдЦ рд╡реНрдпрдХреНрдд рдЧрд░реНрдЫрдиреНред рдЙрдирд▓реЗ рдкрд╛рдиреАрдХреЛ рдЕрднрд╛рд╡, рдШрд╛рдо рд▓рд╛рдЧреНрджрд╛ рдзреБрд▓реЛ рд░ рдкрд╛рдиреА рдкрд░реНрджрд╛ рд╣рд┐рд▓реЛ рд╣реБрдиреЗ рдмрд╛рдЯреЛрдХреЛ рд╡рд░реНрдгрди рдЧрд░реНрдЫрдиреНред рдпрд╛рддреНрд░рд╛рдорд╛ рдЧреЛрдард╛рд▓рд╛, рднрд╛рд░реА рдмреЛрдХреНрдиреЗ рдорд╛рдирд┐рд╕рд╣рд░реВ, рдкрд╕рд▓, рдЧреЛрда рдЖрджрд┐рдХреЛ рдЪрд┐рддреНрд░рдг рдЫ, рдЬрд╕рд▓реЗ рддреНрдпрд╣рд╛рдБрдХреЛ рдХрдард┐рди рдЬреАрд╡рдирд╢реИрд▓реА рджреЗрдЦрд╛рдЙрдБрдЫред рд▓реЗрдЦрдХрд▓реЗ рддреБрдореНрд▓рд┐рдЩрдХреЛ рд╣рд┐рдЙрдБ (рдЬреБрди рдмреЗрд▓рд╛рдпрддрдХреЛ рднрдиреНрджрд╛ рдкреНрдпрд╛рд░реЛ рд▓рд╛рдЧреНрдЫ), рд░рд╛рдЬрд╛рдкреБрд░рдХреЛ рдХрд╛рд╕реЗрдШрд░реА, рдХреЗрд▓реНрдХреЗрдиреАрдХреЛ рдЙрдХрд╛рд▓реЛ, рдЕрдШреЛрд░реА рдЧрд╛рдБрдардХреЛ рд╕рд╛рдиреЛ рдлрд▓рд╛рдореЗ рдкреБрд▓, рдкреБрд╡рд╛ рдЦреЛрд▓рд╛, рдЯреБрдХреБрдЪрд╛, рд╕рдЗрдмрд╛рд╕рдХреЛ рд▓реЗрдХ, рдЪрдиреНрджреНрд░рд╛рдЧрд┐рд░реА рдЬрд╕реНрддрд╛ рдард╛рдЙрдБрд╣рд░реВрдХреЛ рдЕрдиреБрднрд╡ рд╡рд░реНрдгрди рдЧрд░реНрдЫрдиреНред рд▓реЗрдЦрдХрд▓реЗ рдШрдирдШрд╕реНрдпрд╛ рднреМрдЧреЛрд▓рд┐рдХ рд░реВрдкрдорд╛ рдорд╛рддреНрд░ рдирднрдИ рд╕рд╛рдорд╛рдЬрд┐рдХ, рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рд░ рдЖрд░реНрдерд┐рдХ рд░реВрдкрдорд╛ рдкрдирд┐ рдкрд┐рдЫрдбрд┐рдПрдХреЛрдорд╛ рдЪрд┐рдиреНрддрд╛ рд╡реНрдпрдХреНрдд рдЧрд░реНрдЫрдиреН рд░ рд╡рд┐рдХрд╛рд╕ рдХрд┐рди рдХреЗрд╣реА рдард╛рдЙрдБрдорд╛ рдорд╛рддреНрд░ рдХреЗрдиреНрджреНрд░рд┐рдд рднрдпреЛ, рджреБрд░реНрдЧрдо рдХреНрд╖реЗрддреНрд░рдорд╛ рдХрд┐рди рдкреБрдЧреЗрди рднрдиреА рдкреНрд░рд╢реНрди рдЧрд░реНрдЫрдиреНред рдирд┐рдпрд╛рддреНрд░рд╛рдХреЛ рд╕рдиреНрджреЗрд╢ рд╣реЛ - рд╕рдВрдШрд░реНрд╖ рдЧрд░реНрджреИ рдЕрдШрд┐ рдмрдвреНрдиреБрдкрд░реНрдЫ, рдкрд░реНрдпрдЯрди рдкреНрд░рд╡рд░реНрджреНрдзрди рд░ рдЧреНрд░рд╛рдореАрдг рд╡рд┐рдХрд╛рд╕ рдЖрд╡рд╢реНрдпрдХ рдЫ, рд░ рдХрдард┐рдирд╛рдЗрдмреАрдЪ рдкрдирд┐ рдЬреАрд╡рдирдХреЛ рд╕реМрдиреНрджрд░реНрдп рдЦреЛрдЬреНрдиреБрдкрд░реНрдЫред` },
             { id: "ne3", chapterName: "рдкрд╛рда рел: рдПрдХ рдЪрд┐рд╣рд╛рди", author: "рд╣реГрджрдпрдЪрдиреНрджреНрд░ рд╕рд┐рдВрд╣ рдкреНрд░рдзрд╛рди", characters: ["рдЕрд╖реНрдЯрдирд╛рд░рд╛рдпрдг", "рд▓рддрд╛рдорд╛рдпрд╛", "рд╢рд┐рд╡рдирд╛рд░рд╛рдпрдг", "рдирд╛рдиреАрдердХреБ", "рдкреБрдирдирд╛рд░рд╛рдпрдг", "рд╣рд░реНрд╖рдирд╛рд░рд╛рдпрдг", "рдЧреЛрджрдд рдкреНрд░рд╕рд╛рдж (рдбрд╛рдХреНрдЯрд░)", "рд╕реБрд░рдорд╛рди (рд╕рд╛рд╣реБ)", "рд░рд╛рдордмрд╣рд╛рджреБрд░ (рдХрд╛рд░рд┐рдиреНрджрд╛)"], summary: `рдпреЛ рд╣реГрджрдпрдЪрдиреНрджреНрд░ рд╕рд┐рдВрд╣ рдкреНрд░рдзрд╛рдирджреНрд╡рд╛рд░рд╛ рд▓рд┐рдЦрд┐рдд рд╕рд╛рдорд╛рдЬрд┐рдХ рдпрдерд╛рд░реНрдерд╡рд╛рджреА рдЙрдкрдиреНрдпрд╛рд╕ рд╣реЛред рдХрдерд╛ рдЕрд╖реНрдЯрдирд╛рд░рд╛рдпрдг рдирд╛рдордХрд╛ рдЧрд░рд┐рдм рдХрд┐рд╕рд╛рди рд░ рдЙрдирдХреЛ рдкрд░рд┐рд╡рд╛рд░рдХреЛ рд╕рдВрдШрд░реНрд╖, рдкреНрд░реЗрдо, рдзреЛрдХрд╛ рд░ рдирд┐рдпрддрд┐рдХреЛ рдЦреЗрд▓рдорд╛ рдЖрдзрд╛рд░рд┐рдд рдЫред рдЕрд╖реНрдЯрдирд╛рд░рд╛рдпрдг рд╕рд┐рдХрд┐рд╕реНрдд рдмрд┐рд░рд╛рдореА рдкрд░реНрдЫрдиреН рд░ рдмрд╛рдБрдЪреНрдиреЗ рдЖрд╢рд╛ рдорд╛рд░реНрдЫрдиреНред рдЧрд░рд┐рдмреАрдХрд╛ рдХрд╛рд░рдг рдЙрдкрдЪрд╛рд░ рд░ рдХрд╛рдЬрдХреНрд░рд┐рдпрд╛рдорд╛ рдЦрд░реНрдЪ рдирдЧрд░реНрди рдкрд░рд┐рд╡рд╛рд░рд▓рд╛рдИ рднрдиреНрдЫрдиреН рдХреНрд░рд┐рдпрд╛ рдЦрд░реНрдЪрдХрд╛ рд▓рд╛рдЧрд┐ реирел рд░реБрдкреИрдпрд╛рдБ рд▓реБрдХрд╛рдПрд░ рд░рд╛рдЦреНрдЫрдиреНред рддрд░ рдкрд░рд┐рд╡рд╛рд░рд▓реЗ рдЛрдг рд▓рд┐рдПрд░ рдЭрд╛рд░рдлреБрдХ рд░ рдкрдЫрд┐ рдбрд╛рдХреНрдЯрд░ рдЧреЛрджрддреНрдд рдкреНрд░рд╕рд╛рджрдХрд╣рд╛рдБ рдЙрдкрдЪрд╛рд░ рдЧрд░рд╛рдЙрди рдЦреЛрдЬреНрдЫрдиреНред рдбрд╛рдХреНрдЯрд░ рд▓реЛрднреА рд░ рдХрд╛рдореБрдХ рдерд┐рдП, рдЙрдирд▓реЗ рдкреИрд╕рд╛рдХреЛ рд▓реЛрднрдорд╛ рдирд╛рдиреАрдердХреБрдкреНрд░рддрд┐ рдХреБрджреГрд╖реНрдЯрд┐ рд░рд╛рдЦреНрдЫрдиреНред рдЧрд╛рдЙрдБрдХрд╛ рдзрдиреА рд╕реБрдмреНрдмрд╛ рд╕реБрд░рдорд╛рдирд▓реЗ рдкрдирд┐ рдирд╛рдиреАрдердХреБрд▓рд╛рдИ рд▓реЛрднреНрдпрд╛рдЙрди рдЦреЛрдЬреНрдЫрдиреНред рдЖрдорд╛ рд▓рддрд╛рдорд╛рдпрд╛ рд╕реБрдмреНрдмрд╛рдХреЛ рдкреНрд░рд╕реНрддрд╛рд╡ рдорд╛рдиреНрди рддрдпрд╛рд░ рднрдПрдкрдирд┐ рджрд╛рдЬреБ рд╢рд┐рд╡рдирд╛рд░рд╛рдпрдгрд▓реЗ рдмрд╣рд┐рдиреАрд▓рд╛рдИ рдмрдЪрд╛рдЙрдБрдЫрдиреН рд░ рдЙрдирдХреЛ рд╡рд┐рд╡рд╛рд╣ рдЗрдорд╛рдиреНрджрд╛рд░ рдпреБрд╡рдХ рд░рд╛рдордЦреЗрд▓рд╡рд╛рди рд░рд╛рдЙрддрд╕рдБрдЧ рдЧрд░рд┐рджрд┐рдиреНрдЫрдиреНред рдХрд╛рдиреНрдЫреЛ рдЫреЛрд░рд╛ рд╣рд░реНрд╖рдирд╛рд░рд╛рдпрдгрдХреЛ рд╡рд┐рд╡рд╛рд╣ рддрд╛рдорд╛рдЩ рд╕рдореБрджрд╛рдпрдХреА рдкреБрддрд▓реАрд╕рдБрдЧ рд╣реБрдиреНрдЫ, рдЬрд╕рд▓реЗ рдЬрд╛рддреАрдп рдПрдХрддрд╛ рджреЗрдЦрд╛рдЙрдБрдЫред рдкрд░рд┐рд╡рд╛рд░ рдЦреЗрддреАрдкрд╛рддреАрдорд╛ рд▓рд╛рдЧреНрдЫред рддрд░ рд╡рд┐.рд╕рдВ. реирежрезрез рд╕рд╛рд▓рдХреЛ рднреАрд╖рдг рдмрд╛рдвреАрд▓реЗ рд╢рд┐рд╡рдирд╛рд░рд╛рдпрдгрдХреЛ рдкрд░рд┐рд╡рд╛рд░рд╕рд╣рд┐рдд рдЧрд╛рдЙрдБ рдиреИ рддрд╣рд╕рдирд╣рд╕ рдкрд╛рд░реНрдЫ, рд╕рдмреИрдХреЛ рдореГрддреНрдпреБ рд╣реБрдиреНрдЫред рдШрд░, рдЦреЗрдд, рд╕рдкрдирд╛ рд╕рдмреИ рдмрдЧреЗрд░ рдЬрд╛рдиреНрдЫ рд░ рдкреВрд░реИ рдкрд░рд┐рд╡рд╛рд░ рдПрдЙрдЯреИ рдЪрд┐рд╣рд╛рдирдорд╛ рдкрд░рд┐рдгрдд рд╣реБрдиреНрдЫред рдЙрдкрдиреНрдпрд╛рд╕рд▓реЗ рдЧрд░рд┐рдмреА, рд╕рд╛рдорд╛рдЬрд┐рдХ рдЕрдиреНрдпрд╛рдп, рд╡рд┐рднреЗрдж, рд╢реЛрд╖рдг, рд╕рдВрдШрд░реНрд╖ рд░ рд╕рд╛рдордиреНрддреА рд╕реЛрдЪрдХреЛ рдкреНрд░рднрд╛рд╡рд▓рд╛рдИ рдЪрд┐рддреНрд░рдг рдЧрд░реНрдЫред рдпрд╕рд▓реЗ рдЬрд╛рддреАрдп рдПрдХрддрд╛ рд░ рдЕрдиреНрдпрд╛рдп рд╡рд┐рд░реБрджреНрдзрдХреЛ рд╕рдВрдШрд░реНрд╖ рдкрдирд┐ рджреЗрдЦрд╛рдЙрдБрдЫред` },
             { id: "ne4", chapterName: "рдкрд╛рда рем: рд╕реНрдЯрд┐рдлрди рд╡рд┐рд▓рд┐рдпрдо рд╣рдХрд┐рдЩ", author: "Not mentioned (Biographical text)", characters: ["рд╕реНрдЯрд┐рдлрди рд╣рдХрд┐рдЩ (Main Figure)"], summary: `рд╕реНрдЯрд┐рдлрди рд╣рдХрд┐рдЩрдХреЛ рдЬреАрд╡рдиреАред реирез рд╡рд░реНрд╖рдХреЛ рдЙрдореЗрд░рдорд╛ рдЧрдореНрднреАрд░ рд░реЛрдЧ (ALS) рд▓рд╛рдЧреЗрд░ рдбрд╛рдХреНрдЯрд░рд▓реЗ реи рд╡рд░реНрд╖ рдорд╛рддреНрд░ рдмрд╛рдБрдЪреНрдЫ рднрдиреЗ рдкрдирд┐ рдЙрдирд▓реЗ рд╣рд╛рд░ рдорд╛рдиреЗрдирдиреНред рдмрд░реБ рдЭрдиреН рдореЗрд╣реЗрдирдд рдЧрд░реЗрд░ рд╡рд┐рдЬреНрдЮрд╛рдирдХрд╛ рд░рд╣рд╕реНрдп рдЦреЛрд▓реНрди рд▓рд╛рдЧреЗред резрепрекреи рдЬрдирд╡рд░реА рео рдорд╛ рдмреЗрд▓рд╛рдпрддрдХреЛ рдЕрдХреНрд╕рдлреЛрд░реНрдбрдорд╛ рдЬрдиреНрдореЗрдХрд╛ рд╣рдХрд┐рдЩ рд╕рд╛рдиреИрджреЗрдЦрд┐ рдЬрд┐рдЬреНрдЮрд╛рд╕реБ рдерд┐рдП, рдкреБрд░рд╛рдирд╛ рд╕рд╛рдорд╛рди рдЦреЛрд▓реЗрд░ рдЕрдзреНрдпрдпрди рдЧрд░реНрдереЗ, рд╕рд╛рдереАрд╣рд░реВрд╕рдБрдЧ рдХрдореНрдкреНрдпреБрдЯрд░ рдмрдирд╛рдП, рдЙрдиреА 'рдЖрдЗрдиреНрд╕реНрдЯрд╛рдЗрди' рдЙрдкрдирд╛рдорд▓реЗ рдЪрд┐рдирд┐рдиреНрдереЗред резрен рд╡рд░реНрд╖рдорд╛ рдЕрдХреНрд╕рдлреЛрд░реНрдбрдорд╛ рднреМрддрд┐рдХрд╢рд╛рд╕реНрддреНрд░ рдкрдвреЗред реирез рд╡рд░реНрд╖рдорд╛ рд░реЛрдЧ рд▓рд╛рдЧреЗрдкрдирд┐ рд╕рдХрд╛рд░рд╛рддреНрдордХ рд╕реЛрдЪ рд░рд╛рдЦреЗ рд░ рдХрд╛рдо рдЧрд░рд┐рд░рд╣реЗред рдЙрдирдХреЛ рднрдирд╛рдЗ рдерд┐рдпреЛ - "рдЬреАрд╡рдирдХреЛ рдХрдард┐рдирд╛рдЗрдмрд╛рд░реЗ рдЧреБрдирд╛рд╕реЛ рдирдЧрд░, рдХреЗрд╣реА рдЧрд░ред" резрепремрел рдорд╛ рдЬреЗрди рд╡рд╛рдЗрд▓реНрдбрд╕рдБрдЧ рд╡рд┐рд╡рд╛рд╣ рдЧрд░реЗ (рдкрдЫрд┐ рдбрд┐рднреЛрд░реНрд╕ рднрдпреЛ), рдЬрд╕рдмрд╛рдЯ рей рд╕рдиреНрддрд╛рди рднрдПред рдкрдЫрд┐ рдирд░реНрд╕ рдПрд▓реЗрди рдореЗрд╕рдирд╕рдБрдЧ рдкрдирд┐ рд╡рд┐рд╡рд╛рд╣ рдЧрд░реЗ (рддреНрдпреЛ рдкрдирд┐ рдЯрд┐рдХреЗрди)ред рдЙрдирд▓реЗ рдмреНрд▓реНрдпрд╛рдХ рд╣реЛрд▓, рдмреНрд░рд╣реНрдорд╛рдгреНрдбрдХреЛ рдЙрддреНрдкрддреНрддрд┐, рд╡рд╛рд░реНрдорд╣реЛрд▓ рд░ рд╕рдордп рдпрд╛рддреНрд░рд╛рдмрд╛рд░реЗ рдорд╣рддреНрддреНрд╡рдкреВрд░реНрдг рд╕рд┐рджреНрдзрд╛рдиреНрдд рджрд┐рдПред рдЙрдирдХреЛ рдкреБрд╕реНрддрдХ 'рдЕ рдмреНрд░рд┐рдл рд╣рд┐рд╕реНрдЯреНрд░реА рдЕрдл рдЯрд╛рдЗрдо' (резрепреорео) рекреж рднрдиреНрджрд╛ рдмрдвреА рднрд╛рд╖рд╛рдорд╛ рдЕрдиреБрд╡рд╛рдж рднрдИ рд╡рд┐рд╢реНрд╡рднрд░ рдЪрд░реНрдЪрд┐рдд рднрдпреЛред реирежрезрео рдорд╛рд░реНрдЪ резрек рдорд╛ ренрем рд╡рд░реНрд╖рдХреЛ рдЙрдореЗрд░рдорд╛ рдирд┐рдзрди рднрдпреЛред рдЙрдирдХреЛ рдЬреАрд╡рдирд▓реЗ рд╢рд╛рд░реАрд░рд┐рдХ рдЕрд╢рдХреНрддрддрд╛ рдмрд╛рдзрд╛ рд╣реЛрдЗрди, рдорд╛рдирд╕рд┐рдХ рджреГрдврддрд╛ рдиреИ рд╕рдлрд▓рддрд╛рдХреЛ рдореВрд▓ рд╣реЛ рднрдиреНрдиреЗ рдкреНрд░реЗрд░рдгрд╛ рджрд┐рдиреНрдЫред рдЬрд┐рдЬреНрдЮрд╛рд╕рд╛ рд░рд╛рдЦреНрдиреБ, рдкреНрд░рд╢реНрди рдЧрд░реНрдиреБ рд░ рдЕрд╕рдлрд▓рддрд╛рдмрд╛рдЯ рд╕рд┐рдХреНрдиреБрдкрд░реНрдЫ рднрдиреНрдиреЗ рд╕рдиреНрджреЗрд╢ рдЙрдирдХреЛ рдЬреАрд╡рдирдмрд╛рдЯ рдкрд╛рдЗрдиреНрдЫред` },
             { id: "ne5", chapterName: "рдкрд╛рда рен: рд╣рд╛рдореАрд▓рд╛рдИ рдмреЛрд▓рд╛рдЙрдЫрдиреН рд╣рд┐рдордЪреБрд▓реА", author: "рд░рд╛рд╖реНрдЯрдХрд╡рд┐ рдорд╛рдзрд╡ рдШрд┐рдорд┐рд░реЗ", characters: ["рд╣рд┐рдордЪреБрд▓реА (Symbolic/Personified)"], summary: `рдпреЛ рд░рд╛рд╖реНрдЯреНрд░рдХрд╡рд┐ рдорд╛рдзрд╡ рдШрд┐рдорд┐рд░реЗрдХреЛ рдХрд╡рд┐рддрд╛ рд╣реЛред рдкрдвреНрджрд╛ рд╣рд┐рдорд╛рд▓реА рдпрд╛рддреНрд░рд╛ рдЧрд░реЗрдЬрд╕реНрддреИ рдЕрдиреБрднреВрддрд┐ рд╣реБрдиреНрдЫ, рдЬрд╣рд╛рдБ рд╣рд┐рдорд╛рд▓, рдЬрдВрдЧрд▓, рдбрд╛рдБрдлреЗ, рдЪреМрд░реА, рдЗрдиреНрджреНрд░реЗрдгреА рдЬрд╕реНрддрд╛ рд╕реБрдиреНрджрд░ рджреГрд╢реНрдп рдЫрдиреНред рд╣рд┐рдорд╛рд▓рд▓реЗ рдиреИ рд╣рд╛рдореАрд▓рд╛рдИ рдмреЛрд▓рд╛рдЗрд░рд╣реЗрдХреЛ ("рдЖрдК рдорд▓рд╛рдИ рдЪреБрдо") рд░ рдЕрдШрд┐ рдмрдвреНрди, рдирдерд╛рдХреНрди рдкреНрд░реЗрд░рд┐рдд рдЧрд░рд┐рд░рд╣реЗрдХреЛ рдЬрд╕реНрддреЛ рд▓рд╛рдЧреНрдЫред рдХрд╡рд┐рддрд╛рд▓реЗ рд╣рд┐рдорд╛рд▓реА рд╕реМрдиреНрджрд░реНрдп, рдиреЗрдкрд╛рд▓реАрдХреЛ рд╕рдВрдШрд░реНрд╖, рдЬреАрд╡рдирд╢реИрд▓реА, рд╕рд╛рд╣рд╕ рд░ рд╕реНрд╡рд╛рднрд┐рдорд╛рди рджрд░реНрд╢рд╛рдЙрдБрдЫред рд╣рд┐рдорд╛рд▓ рдЪрдвреНрдиреБ рд╕рдЬрд┐рд▓реЛ рдЫреИрди, рдпреЛ рд╕рдВрдШрд░реНрд╖рдХреЛ рдпрд╛рддреНрд░рд╛ рд╣реЛ, рдЬрд╕рдорд╛ рдЕрдиреЗрдХ рдХрдард┐рдирд╛рдЗ (рдХрдо рд╣рд╛рд╡рд╛, рдЙрдХрд╛рд▓реЛ, рдЪрд┐рд╕реЛ, рд╣рд┐рдордкрд╣рд┐рд░реЛ, рдЪрд┐рдкреНрд▓реЛ рдмрд╛рдЯреЛ) рд╣реБрдиреНрдЫрдиреНред рд╣рд╛рдореНрд░рд╛ рдкреБрд░реНрдЦрд╛рд╣рд░реВрд▓реЗ рдпрд┐рдиреИ рдХрдард┐рдирд╛рдЗ рдкрд╛рд░ рдЧрд░реНрджреИ, рд╕рдВрдШрд░реНрд╖ рдЧрд░реЗрд░ рд╣рд┐рдорд╛рд▓ рдЪреБрдореЗ рд░ рд╕рдлрд▓ рднрдПред рдЕрдм рд╣рд╛рдореНрд░реЛ рдкрд╛рд▓реЛ рд╣реЛ, рдЬреАрд╡рдирдХрд╛ рдХрдард┐рдирд╛рдЗрд╕рдБрдЧ рдирдбрд░рд╛рдИ, рд╣рд┐рдорд╛рд▓ рдЬрд╕реНрддреИ рдЕрдЯрд▓ рднрдПрд░ рдЙрдЪрд╛рдЗрдХреЛ рд▓рдХреНрд╖реНрдп рд░рд╛рдЦреА рдЕрдШрд┐ рдмрдвреНрдиреБрдкрд░реНрдЫред рд╣рд┐рдорд╛рд▓ рд╣рд╛рдореНрд░реЛ рдЧреМрд░рд╡ рд░ рд╕реНрд╡рд╛рднрд┐рдорд╛рди рд╣реЛ, рдпрд╕рдХреЛ рд░рдХреНрд╖рд╛ рд░ рд╕рдореНрдорд╛рди рдЧрд░реНрдиреБрдкрд░реНрдЫред рдкрд░реНрдпрдЯрди рд╡рд┐рдХрд╛рд╕рд▓реЗ рджреЗрд╢рд▓рд╛рдИ рдЖрд░реНрдерд┐рдХ рдЯреЗрд╡рд╛ рдкреБрдЧреНрдЫред рд╕рдордЧреНрд░рдорд╛, рд╣рд┐рдорд╛рд▓рд▓реЗ рд╣рд╛рдореАрд▓рд╛рдИ рдЕрдШрд┐ рдмрдвреНрди рдирд┐рд░рдиреНрддрд░ рдкреНрд░реЗрд░рд┐рдд рдЧрд░рд┐рд░рд╣реЗрдХреЛ рдЫред` },
             { id: "ne6", chapterName: "рдкрд╛рда рео: рдорд╛рддреГрддреНрд╡", author: "рднрд╛рдЧреАрд░рдереА рд╢реНрд░реЗрд╖реНрда", characters: ["рдордорддрд╛", "рд╕реБрдмреЛрдз", "рдордорддрд╛рдХреЛ рдЫреЛрд░рд╛ (unnamed)"], summary: `рдпреЛ рднрд╛рдЧреАрд░рдереА рд╢реНрд░реЗрд╖реНрдардХреЛ рдХрдерд╛ рд╣реЛ, рдЬрд╕рд▓реЗ рдЖрдорд╛рдХреЛ рдкреНрд░реЗрдо, рдмрд▓рд┐рджрд╛рди рд░ рд╕рдЪреЗрддрдирд╛ рджреЗрдЦрд╛рдЙрдБрдЫред рдореБрдЦреНрдп рдкрд╛рддреНрд░ рдордорддрд╛ рд╣реБрдиреН, рдЬрд╕рдХреЛ рд╢реНрд░реАрдорд╛рдиреН рд╣рд╡рд╛рдИ рджреБрд░реНрдШрдЯрдирд╛рдорд╛ рдмрд┐рддреНрдЫрдиреНред рдЙрдиреА рдПрдХреНрд▓реЛрдкрди рд░ рд╕рдВрдШрд░реНрд╖рдорд╛ рд╣реБрдиреНрдЫрд┐рдиреНред рд╢реНрд░реАрдорд╛рдирдХреЛ рд╕рд╛рдереА рд╕реБрдмреЛрдзрд▓реЗ рдЙрдирд▓рд╛рдИ рд╕рд╣рд╛рд░рд╛ рджрд┐рдиреНрдЫрдиреН рд░ рдордорддрд╛ рдЙрд╕рд▓рд╛рдИ рдорди рдкрд░рд╛рдЙрди рдерд╛рд▓реНрдЫрд┐рдиреНред рддрд░ рдордорддрд╛рдХреЛ резреж рд╡рд░реНрд╖реЗ рдЫреЛрд░рд╛ рд╕реБрдмреЛрдзрд▓рд╛рдИ рдорди рдкрд░рд╛рдЙрдБрджреИрди, рдХрд┐рдирдХрд┐ рд╕реБрдмреЛрдз рдмрдЪреНрдЪрд╛рд╣рд░реВрд▓рд╛рдИ рд╣реЗрдкреНрдиреЗ, рд╣рдХрд╛рд░реНрдиреЗ рд░ рдЙрдиреАрд╣рд░реВрдкреНрд░рддрд┐ рдЕрд╕рдВрд╡реЗрджрдирд╢реАрд▓ рд╡реНрдпрд╡рд╣рд╛рд░ рдЧрд░реНрдЫред рдЫреЛрд░рд╛рд▓реЗ рдЖрдорд╛рд▓рд╛рдИ рд╕реБрдмреЛрдзрд▓рд╛рдИ рдШрд░рдорд╛ рдирдмреЛрд▓рд╛рдЙрди рднрдиреНрдЫред рдордорддрд╛рд▓реЗ рд╕реБрдмреЛрдз рдЕрд╕рд▓ рднрдПрдХреЛ рд╕рдореНрдЭрд╛рдЙрди рдЦреЛрдЬреНрдЫрд┐рдиреНред рдПрдХрджрд┐рди рдордорддрд╛рд▓реЗ рд╕реБрдмреЛрдзрд▓рд╛рдИ рд╣рд▓реБрд╡рд╛ рдмрдирд╛рдПрд░ рдЦреБрд╡рд╛рдЙрдБрджрд╛, рд╕реБрдмреЛрдзрд▓реЗ рдмрдЪреНрдЪрд╛рд╣рд░реВрдХреЛ рднрд╛рдЧ рд╕рдореЗрдд рдЦрд╛рдЗрджрд┐рдиреНрдЫ, рдЬрд╕рд▓реЗ рдЙрд╕рдХреЛ рд╕реНрд╡рд╛рд░реНрдереАрдкрди рджреЗрдЦрд╛рдЙрдБрдЫред рдкрдЫрд┐ рд╕реБрдмреЛрдзрд▓реЗ рдордорддрд╛рд▓рд╛рдИ рдЫреЛрд░рд╛рдЫреЛрд░реАрднрдиреНрджрд╛ рдЖрдлреВрд▓рд╛рдИ рдмрдвреА рдорд╛рдпрд╛ рдЧрд░реНрдиреБрдкрд░реНрдиреЗ рджрдмрд╛рдм рджрд┐рдиреНрдЫред рддрдм рдордорддрд╛рд▓реЗ рдмреБрдЭреНрдЫрд┐рдиреН рдХрд┐ рд╕реБрдмреЛрдз рд╕реНрд╡рд╛рд░реНрдереА рдЫ, рдЙрд╕рд▓реЗ рдордорддрд╛рд▓рд╛рдИ рдорд╛рддреНрд░ рдЪрд╛рд╣рдиреНрдЫ, рдмрдЪреНрдЪрд╛рд╣рд░реВрд▓рд╛рдИ рд╣реЛрдЗрдиред рдЬрд╕рд▓реЗ рдЖрдлреНрдирд╛ рдЫреЛрд░рд╛рдЫреЛрд░реАрд▓рд╛рдИ рдорд╛рдпрд╛ рдЧрд░реНрджреИрди, рдКрд╕рдБрдЧрдХреЛ рд╕рдореНрдмрдиреНрдз рдЯрд┐рдХреНрджреИрди рднрдиреНрдиреЗ рдорд╣рд╕реБрд╕ рдЧрд░реЗрд░ рдЕрдиреНрддрдорд╛ рдордорддрд╛рд▓реЗ рд╕реБрдмреЛрдзрд▓рд╛рдИ рдЫрд╛рдбреЗрд░ рдЖрдлреНрдирд╛ рдЫреЛрд░рд╛рдЫреЛрд░реАрд▓рд╛рдИ рдиреИ рдЕрдБрдЧрд╛рд▓реНрдиреЗ рдирд┐рд░реНрдгрдп рдЧрд░реНрдЫрд┐рдиреНред рдпрд╕рд▓реЗ рд╕рддреНрдпрдХреЛ рдЬреАрдд рд░ рдЕрд╕рддреНрдп (рд╕реНрд╡рд╛рд░реНрде) рдХреЛ рд╣рд╛рд░ рджреЗрдЦрд╛рдЙрдБрдЫред рдХрдерд╛рдХреЛ рдореБрдЦреНрдп рд╕рдиреНрджреЗрд╢ рдорд╛рддреГрддреНрд╡ рд╕рдВрд╕рд╛рд░рдХреЛ рд╕рдмреИрднрдиреНрджрд╛ рдареВрд▓реЛ, рдкрд╡рд┐рддреНрд░ рд░ рдирд┐рдГрд╕реНрд╡рд╛рд░реНрде рдкреНрд░реЗрдо рд╣реЛ, рдЬрд╕рдХреЛ рдЕрдЧрд╛рдбрд┐ рдЕрд░реВ рд╕рдмреИ рд╕рдореНрдмрдиреНрдз рдлрд┐рдХреНрдХрд╛ рд╣реБрдиреНрдЫрдиреНред` },
             { id: "ne7", chapterName: "рдкрд╛рда реп: рдЧреЛрд░реНрдЦреЗ", author: "рдмрдЦрддрдмрд╣рд╛рджреБрд░ рдерд╛рдкрд╛", characters: ["рдкреЗрд╢рд▓", "рд╕рддрдкрд╛рд▓", "рдЧреЛрд░реНрдЦреЗ (Personified Antivirus)"], summary: `рдпреЛ рдмрдЦрддрдмрд╣рд╛рджреБрд░ рдерд╛рдкрд╛рдХреЛ рдХрдерд╛ рд╣реЛ, рдЬреБрди рдЖрдзреБрдирд┐рдХ рдкреНрд░рд╡рд┐рдзрд┐, рд╡рд┐рдЬреНрдЮрд╛рди рд░ рдХрдореНрдкреНрдпреБрдЯрд░рдХреЛ рд╕рдВрд╕рд╛рд░рд╕рдБрдЧ рд╕рдореНрдмрдиреНрдзрд┐рдд рдЫред рд╡рд┐рдЬреНрдЮрд╛рди рд░ рдкреНрд░рд╡рд┐рдзрд┐рд▓реЗ рдЬреАрд╡рди рд╕рд╣рдЬ рдмрдирд╛рдПрдХреЛ рдЫ, рддрд░ рдпрд╕рд▓реЗ рднрд╛рдЗрд░рд╕ рдЬрд╕реНрддрд╛ рдирдпрд╛рдБ рдЪреБрдиреМрддреА рдкрдирд┐ рд▓реНрдпрд╛рдПрдХреЛ рдЫред рдХрдерд╛рдорд╛ рдкреЗрд╢рд▓ рдирд╛рдордХрд╛ рдкреНрд░рд╡рд┐рдзрд┐ рд╡рд┐рдЬреНрдЮ рдкрд╛рддреНрд░ рдЫрдиреН, рдЬрд╕рд▓реЗ 'рдЧреЛрд░реНрдЦреЗ' рдирд╛рдордХ рдПрдиреНрдЯрд┐рднрд╛рдЗрд░рд╕ рд╕рдлреНрдЯрд╡реЗрдпрд░ рдмрдирд╛рдПрд░ рд╕рддрдкрд╛рд▓рдХреЛ рдХрдореНрдкреНрдпреБрдЯрд░рдмрд╛рдЯ рднрд╛рдЗрд░рд╕ рд╣рдЯрд╛рдЙрдБрдЫрдиреНред рдХрдерд╛рд▓реЗ рдХрдореНрдкреНрдпреБрдЯрд░рд▓рд╛рдИ рдорд╛рдирд╡ рд╢рд░реАрд░, рднрд╛рдЗрд░рд╕рд▓рд╛рдИ рд░реЛрдЧ рд░ рдПрдиреНрдЯрд┐рднрд╛рдЗрд░рд╕рд▓рд╛рдИ рдФрд╖рдзреА рд╡рд╛ рдбрд╛рдХреНрдЯрд░рд╕рдБрдЧ рддреБрд▓рдирд╛ рдЧрд░реНрдЫред 'рдЧреЛрд░реНрдЦреЗ' рд▓реЗ рдкрд╛рдБрдЪ рдкреНрд░рдХрд╛рд░рдХрд╛ рднрд╛рдЗрд░рд╕ рдирд╖реНрдЯ рдЧрд░реЗрд░ рдХрдореНрдкреНрдпреБрдЯрд░рд▓рд╛рдИ рдареАрдХ рдкрд╛рд░реНрдЫред рдХрдерд╛рдХреЛ рдореБрдЦреНрдп рд╡рд┐рд╖рдпрд╡рд╕реНрддреБ рдХрдореНрдкреНрдпреБрдЯрд░ рднрд╛рдЗрд░рд╕ рд░ рдПрдиреНрдЯрд┐рднрд╛рдЗрд░рд╕ рдкреНрд░рд╡рд┐рдзрд┐ рд╣реЛред рдпрд╕рд▓реЗ рдкреНрд░рд╡рд┐рдзрд┐рдХреЛ рд╕рд╣реА рдкреНрд░рдпреЛрдЧрд▓реЗ рд╕рдорд╕реНрдпрд╛ рд╕рдорд╛рдзрд╛рди рдЧрд░реНрди рд╕рдХрд┐рдиреЗ, рддрд░ рдпрд╕рдХрд╛ рд╕рдХрд╛рд░рд╛рддреНрдордХ рд░ рдирдХрд╛рд░рд╛рддреНрдордХ рджреБрд╡реИ рдкрдХреНрд╖ рд╣реБрдиреЗ (рдЬреЛрдЦрд┐рдо рд░ рдЪреБрдиреМрддреА рдкрдирд┐ рд╣реБрдиреЗ) рдХреБрд░рд╛ рджреЗрдЦрд╛рдЙрдБрдЫред рд╕рд╛рдереИ, рд╕рдорд╕реНрдпрд╛ рд╕рдорд╛рдзрд╛рдирдорд╛ рдорд╛рдирд╡реАрдп рдмреБрджреНрдзрд┐ рд░ рд╕реАрдкрдХреЛ рдорд╣рддреНрддреНрд╡, рднрд╛рдЗрд░рд╕-рдПрдиреНрдЯрд┐рднрд╛рдЗрд░рд╕рдХреЛ рджреНрд╡рдиреНрджреНрд╡рдорд╛рд░реНрдлрдд рдЖрдзреБрдирд┐рдХ рдкреНрд░рд╡рд┐рдзрд┐ рдпреБрдЧрдХреЛ рдЪрд┐рддреНрд░рдг, рд░ рдкреНрд░рд╡рд┐рдзрд┐рд▓реЗ рд╕рд╛рд╣рд┐рддреНрдпрд▓рд╛рдИ рдирдпрд╛рдБ рдЖрдпрд╛рдо рджрд┐рдирд╕рдХреНрдиреЗ рд╕рдиреНрджреЗрд╢ рджрд┐рдПрдХреЛ рдЫред рдХрдерд╛рдорд╛ рд╕реНрдХреНрдпрд╛рди, рднрд╛рдЗрд░рд╕, рдПрдиреНрдЯрд┐рднрд╛рдЗрд░рд╕ рдЬрд╕реНрддрд╛ рдкреНрд░рд╛рд╡рд┐рдзрд┐рдХ рд╢рдмреНрджрд╣рд░реВрдХреЛ рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рдПрдХреЛ рдЫред` },
             { id: "ne8", chapterName: "рдкрд╛рда резреж: рдиреЗрдкрд╛рд▓реА рдкрд╣рд┐рдЪрд╛рди", author: "Not mentioned (Dialogue/Informational text)", characters: ["рд╕рдВрдЧреАрддрд╛ (Speaker)", "рд╕рд▓рд┐рдо (Speaker)", "рдШрдирд╢реНрдпрд╛рдо (Speaker)", "рдмреЗрдЦрдорд╛рди (Speaker)", "рд╕рд┐рдореНрдорд╛ (Speaker)"], summary: `рдпреЛ рд╕рдВрд╡рд╛рджрдорд╛ рдЖрдзрд╛рд░рд┐рдд рдкрд╛рда рд╣реЛ, рдЬрд╕рдорд╛ рд╕рдВрдЧреАрддрд╛, рд╕рд▓рд┐рдо, рдШрдирд╢реНрдпрд╛рдо, рдмреЗрдЦрдорд╛рди рд░ рд╕рд┐рдореНрдорд╛ рдЬрд╕реНрддрд╛ рд╕рд╛рдереАрд╣рд░реВ рдиреЗрдкрд╛рд▓рдХреЛ рдЬрд╛рддреАрдп, рднрд╛рд╖рд┐рдХ рд░ рд╕рд╛рдВрд╕реНрдХреГрддрд┐рдХ рд╡рд┐рд╡рд┐рдзрддрд╛ рдмрд╛рд░реЗ рдЫрд▓рдлрд▓ рдЧрд░реНрдЫрдиреНред рдЙрдиреАрд╣рд░реВ рдпреЛ рд╡рд┐рд╡рд┐рдзрддрд╛рд▓рд╛рдИ рдиреЗрдкрд╛рд▓рдХреЛ рдкрд╣рд┐рдЪрд╛рди рд░ рд╕рдореНрдкрддреНрддрд┐ рдорд╛рдиреНрдЫрдиреН рд░ рдпрд╕рд▓рд╛рдИ рд╕рдорд╕реНрдпрд╛рдХреЛ рд░реВрдкрдорд╛ рдирднрдИ рдореМрд▓рд┐рдХрддрд╛ рд░ рдЧрд░реНрд╡рдХреЛ рд╡рд┐рд╖рдпрдХреЛ рд░реВрдкрдорд╛ рд▓рд┐рдиреБрдкрд░реНрдиреЗ рдХреБрд░рд╛ рдЧрд░реНрдЫрдиреН ред рд╡рд┐рд╡рд┐рдзрддрд╛ рдмреАрдЪрдХреЛ рд╕рд╣рд┐рд╖реНрдгреБрддрд╛, рдЖрдкрд╕реА рд╕рджреНрднрд╛рд╡ рд░ рдПрдХрддрд╛ рдиреИ рдиреЗрдкрд╛рд▓реА рд╕рдорд╛рдЬрдХреЛ рдмрд▓рд┐рдпреЛ рдкрд╣рд┐рдЪрд╛рди рд╣реЛред рдЬрд╛рддрд┐, рднрд╛рд╖рд╛, рдзрд░реНрдо рд╡рд╛ рд╕рдВрд╕реНрдХреГрддрд┐рдХреЛ рдЖрдзрд╛рд░рдорд╛ рджреНрд╡рдиреНрджреНрд╡ рд╣реБрдиреБ рд╣реБрдБрджреИрдиред рд╕рдорд╛рдЬрдорд╛ рд░рд╣реЗрдХрд╛ рд╡рд┐рдХреГрддрд┐ рд░ рдЕрдиреНрдзрд╡рд┐рд╢реНрд╡рд╛рд╕рд▓рд╛рдИ рд╢рд┐рдХреНрд╖рд╛ рд░ рдЪреЗрддрдирд╛рд▓реЗ рд╣рдЯрд╛рдЙрдиреБрдкрд░реНрдЫ, рддрд░ рдЖрдлреНрдиреЛ рдореМрд▓рд┐рдХ рд╕рдВрд╕реНрдХреГрддрд┐рд▓рд╛рдИ рдЬреЛрдЧрд╛рдЙрдиреБрдкрд░реНрдЫред рдЖрдкрд╕реА рд╕рдореНрдорд╛рди рд░ рд╕рджреНрднрд╛рд╡рд▓реЗ рдиреИ рдиреЗрдкрд╛рд▓ рдмрд▓рд┐рдпреЛ рдмрдиреНрдЫ рднрдиреНрдиреЗ рд╡рд┐рдЪрд╛рд░ рд╡реНрдпрдХреНрдд рдЧрд░рд┐рдПрдХреЛ рдЫред рдкрд╛рдардХреЛ рд╕рдореНрдкреВрд░реНрдг рд╕рдиреНрджреЗрд╢ "рд╡рд┐рд╡рд┐рдзрддрд╛рдорд╛ рдПрдХрддрд╛ рдиреИ рдиреЗрдкрд╛рд▓реА рдкрд╣рд┐рдЪрд╛рди рд╣реЛ" рднрдиреНрдиреЗ рд╣реЛред` },
             { id: "ne9", chapterName: "рдкрд╛рда резрез: рд╕рд╣рдХрд╛рд░реА", author: "Not mentioned (Informational text)", characters: ["Not applicable (Topic-based)"], summary: `рд╕рд╣рдХрд╛рд░реА рднрдиреЗрдХреЛ рд╕рдмреИрдЬрдирд╛ рдорд┐рд▓реЗрд░ рдХрд╛рдо рдЧрд░реНрдиреЗ рдкреНрд░рдгрд╛рд▓реА рд╣реЛред рдПрдХреНрд▓реИ рдЧрд░реНрди рдирд╕рдХрд┐рдиреЗ рдХрд╛рдо (рдЬрд╕реНрддреИ рдЦреЗрддреА, рдкрд╕рд▓, рдмреИрдВрдХ, рдмрдЪрдд, рдЙрддреНрдкрд╛рджрди) рдзреЗрд░реИрдЬрдирд╛ рдорд┐рд▓реЗрд░ рдЧрд░реНрджрд╛ рд╕рдЬрд┐рд▓реЛ рд╣реБрдиреНрдЫ рд░ рд╕рдмреИрд▓рд╛рдИ рдлрд╛рдЗрджрд╛ рдкреБрдЧреНрдЫред рд╕рд╣рдХрд╛рд░реА рдорд╛рдирд┐рд╕рдХреЛ рдЖрд░реНрдерд┐рдХ, рд╕рд╛рдорд╛рдЬрд┐рдХ рд░ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЙрдиреНрдирддрд┐рдХрд╛ рд▓рд╛рдЧрд┐, рдЧрд░рд┐рдмрд▓рд╛рдИ рд╕рд╣рдпреЛрдЧ рдЧрд░реНрди рд░ рдмреЗрд░реЛрдЬрдЧрд╛рд░рд▓рд╛рдИ рд░реЛрдЬрдЧрд╛рд░ рджрд┐рди рдЖрд╡рд╢реНрдпрдХ рдЫред рдпрд╕рдХрд╛ рд╡рд┐рд╢реЗрд╖рддрд╛рд╣рд░реВ рд╣реБрдиреН рдпреЛ рд╕рдмреИрдХрд╛ рд▓рд╛рдЧрд┐ рдЦреБрд▓реНрд▓рд╛ рд╣реБрдиреНрдЫ, рд╕рджрд╕реНрдпрд╣рд░реВ рдорд┐рд▓реЗрд░ рдкреИрд╕рд╛ рдЬрдореНрдорд╛ рдЧрд░реНрдЫрдиреН, рдирд╛рдлрд╛ рдмрд╛рдБрдбреНрдЫрдиреН рд░ рдпреЛ рд╕реНрд╡рддрдиреНрддреНрд░ рд╕рдВрд╕реНрдерд╛ рд╣реЛред рд╕рд╣рдХрд╛рд░реАрд▓реЗ рд╕рд╛рдирд╛ рд╡реНрдпрд╡рд╕рд╛рдпрд▓рд╛рдИ рдареВрд▓реЛ рдмрдирд╛рдЙрди, рд░реЛрдЬрдЧрд╛рд░реА рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрди, рдЧрд░рд┐рдмрд▓рд╛рдИ рдЖрд░реНрдерд┐рдХ рд╕рд╣рдпреЛрдЧ рдЧрд░реНрди рд░ рдЧрд╛рдЙрдБрдХреЛ рдЙрддреНрдкрд╛рджрди рдмрдврд╛рдПрд░ рдЖрддреНрдордирд┐рд░реНрднрд░ рдмрдирд╛рдЙрди рдорджреНрджрдд рдЧрд░реНрдЫред рддрд░, рдкрдЫрд┐рд▓реНрд▓реЛ рд╕рдордп рд╕рд╣рдХрд╛рд░реАрдорд╛ рдкреИрд╕рд╛ рджреБрд░реБрдкрдпреЛрдЧ рд╣реБрдиреЗ рд░ рдардЧреА рд╣реБрдиреЗ рд╕рдорд╕реНрдпрд╛ рджреЗрдЦрд┐рдПрдХреЛ рдЫ, рддреНрдпрд╕реИрд▓реЗ рд╕рд╣рдХрд╛рд░реАрд▓рд╛рдИ рдкрд╛рд░рджрд░реНрд╢реА рд░ рдЗрдорд╛рдирджрд╛рд░ рдмрдирд╛рдЙрдиреБ рдЖрд╡рд╢реНрдпрдХ рдЫред рдиреЗрдкрд╛рд▓рдорд╛ рд╕рд╣рдХрд╛рд░реАрдХреЛ рд╕реБрд░реБрд╡рд╛рдд рд╡рд┐.рд╕рдВ. реирежрезрей рдорд╛ рдЪрд┐рддрд╡рдирдорд╛ рднрдПрдХреЛ рдерд┐рдпреЛред` },
             { id: "ne10", chapterName: "рдкрд╛рда резреи: рдЬреАрд╡рдирдорд╛рд░реНрдЧ", author: "Not mentioned (Reportage)", characters: ["рдЫрд┐рд░рд┐рдЩ (рдЙрджреНрдпрдореА)", "рдкрддреНрд░рдХрд╛рд░ (Narrator)"], summary: `рдпреЛ рд░рд┐рдкреЛрд░реНрддрд╛рдЬ (рд╕рд╛рд╣рд┐рддреНрдпрд┐рдХ рдкреНрд░рддрд┐рд╡реЗрджрди) рд╣реЛ, рдЬреБрди рд╕рд╛рд╣рд┐рддреНрдпрдХреЛ рдирдпрд╛рдБ рд╡рд┐рдзрд╛ рд╣реЛред рдпрд╕рдорд╛ рдЫрд┐рд░рд┐рдЩ рдирд╛рдордХрд╛ рд╕рдлрд▓ рдЙрджреНрдпрдореАрдХреЛ рд╕рдВрдШрд░реНрд╖ рд░ рд╕рдлрд▓рддрд╛рдХреЛ рдХрдерд╛ рдкрддреНрд░рдХрд╛рд░рдХреЛ рджреГрд╖реНрдЯрд┐рдХреЛрдгрдмрд╛рдЯ рдкреНрд░рд╕реНрддреБрдд рдЧрд░рд┐рдПрдХреЛ рдЫред рдкрддреНрд░рдХрд╛рд░ рд╕реЛрд▓реБрдЦреБрдореНрдмреБ рдкреБрдЧреЗрд░ 'рдЪреЛрдореЛрд▓реБрдЩрдорд╛ рдФрджреНрдпреЛрдЧрд┐рдХ рдкреНрд░рддрд┐рд╖реНрдард╛рди'рдХрд╛ рд╕рдВрд╕реНрдерд╛рдкрдХ рдЫрд┐рд░рд┐рдЩрд▓рд╛рдИ рднреЗрдЯреНрдЫрдиреНред рдЫрд┐рд░рд┐рдЩ рд╕рд╛рдорд╛рдиреНрдп рдкрд░рд┐рд╡рд╛рд░рдХрд╛ рдерд┐рдП, рдмреБрдмрд╛ рднрд╛рд░реА рдмреЛрдХреНрдереЗред рдереЛрд░реИ рдЬрдорд┐рдирдХреЛ рдЙрдмреНрдЬрдиреАрд▓реЗ рей-рек рдорд╣рд┐рдирд╛ рдорд╛рддреНрд░ рдЦрд╛рди рдкреБрдЧреНрдереНрдпреЛред рдмреБрдмрд╛ рднрд╛рд░реА рдмреЛрдХреНрджрд╛ рд╣рд┐рдЙрдБрдорд╛ рдЪрд┐рдкреНрд▓рд┐рдПрд░ рднреАрд░рдмрд╛рдЯ рдЦрд╕реЗрд░ рдмрд┐рддреЗрдкрдЫрд┐ рд╕рд╛рдиреИрдорд╛ рдЫрд┐рд░рд┐рдЩрд▓реЗ рдкрд░рд┐рд╡рд╛рд░рдХреЛ рдЬрд┐рдореНрдореЗрд╡рд╛рд░реА рд▓рд┐рдиреБрдкрд░реНрдпреЛред рдкрдвреНрдиреЗ рд░рд╣рд░ рднрдП рдкрдирд┐ рднрд╛рд░реА рдмреЛрдХреНрди рдмрд╛рдзреНрдп рднрдПред рддрд░ рднрд╛рдЧреНрдпрд╡рд╢ рдПрдХ рд╡рд┐рджреЗрд╢реА рдкрд░реНрдпрдЯрдХрд▓реЗ рдЫрд╛рддреНрд░рд╡реГрддреНрддрд┐ рджрд┐рдПрдкрдЫрд┐ рдПрд╕рдПрд▓рд╕реА рдкрд╛рд╕ рдЧрд░реЗред рддреНрдпрд╕рдкрдЫрд┐ рд╢рд┐рдХреНрд╖рдХ, рд╕рд░рдХрд╛рд░реА рдЬрд╛рдЧрд┐рд░, рдЯреНрд░реЗрдХрд┐рдЩ рд╡реНрдпрд╡рд╕рд╛рдп рдЧрд░реНрджреИ рдЬрд╛рдкрд╛рди рдкреБрдЧреЗред рдЬрд╛рдкрд╛рдирдХреЛ рдпрд╛рддреНрд░рд╛рд▓реЗ рдЙрдирдХреЛ рд╕реЛрдЪ рдмрджрд▓реНрдпреЛред рд╡рд┐рджреЗрд╢рдорд╛ рд╢реНрд░рдо рдмреЗрдЪреНрдиреБрднрдиреНрджрд╛ рдЖрдлреНрдиреИ рджреЗрд╢рдорд╛ рдХреЗрд╣реА рдЧрд░реНрдиреЗ рд╕реЛрдЪ рдмрдирд╛рдП рд░ 'рдЪреЛрдореЛрд▓реБрдЩрдорд╛ рдФрджреНрдпреЛрдЧрд┐рдХ рдкреНрд░рддрд┐рд╖реНрдард╛рди' рдЦреЛрд▓реЗред рдкреНрд░рддрд┐рд╖реНрдард╛рдирд▓реЗ рдиреЗрдкрд╛рд▓рдХрд╛ рдореМрд▓рд┐рдХ рдореМрд╕рдореА рд╡рд╕реНрддреБрд╣рд░реВ рдЬрд╕реНрддреИ рдЧреБрдиреНрджреНрд░реБрдХ, рд╕рд┐рдиреНрдХреА, рд╕рд╛рддреБ, рд╕рд┐рд╕реНрдиреБрдХреЛ рдзреБрд▓реЛ, рдЪреНрдпрд╛рдЙрдХреЛ рдЕрдЪрд╛рд░, рдмрд╛рдБрд╕рдХрд╛ рд╕рд╛рдордЧреНрд░реАрд╣рд░реВ рдЖрджрд┐ рдЙрддреНрдкрд╛рджрди рдЧрд░реЗрд░ рд╡рд┐рджреЗрд╢ рдирд┐рд░реНрдпрд╛рдд рдЧрд░реНрдЫред рдЫрд┐рд░рд┐рдЩрдХрд╛ рдЕрдиреБрд╕рд╛рд░ рд╡рд┐рджреЗрд╢рдХрд╛ рдиреЗрдкрд╛рд▓реАрд▓реЗ рдЕрдЭреИ рдкрдирд┐ рдпрд╕реНрддрд╛ рдореМрд▓рд┐рдХ рд╡рд╕реНрддреБ рдЦреЛрдЬреНрдЫрдиреНред рдпрд╕рд▓реЗ рджреЗрд╢рд▓рд╛рдИ рдЖрд░реНрдерд┐рдХ рд░реВрдкрдорд╛ рдЖрддреНрдордирд┐рд░реНрднрд░ рдмрдирд╛рдЙрди рдорджреНрджрдд рдЧрд░реНрдЫред рдЫрд┐рд░рд┐рдЩрдХреЛ рд╕рдлрд▓рддрд╛рдХреЛ рд░рд╣рд╕реНрдп рджреЗрд╢рдХреЛ рдореМрд▓рд┐рдХрддрд╛, рд╕реНрд░реЛрддрд╕рд╛рдзрди рд░ рд╕реАрдкрдХреЛ рд╕рд╣реА рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЖрддреНрдордирд┐рд░реНрднрд░ рдмрдиреНрди рд╕рдХрд┐рдиреНрдЫ рднрдиреНрдиреЗ рд╕реЛрдЪ рд╣реЛред рдЙрдирдХреЛ рд╕рдВрдШрд░реНрд╖ рд░ рд╕рдлрд▓рддрд╛ рд╣рд╛рдореА рд╕рдмреИрдХрд╛ рд▓рд╛рдЧрд┐ рдкреНрд░реЗрд░рдгрд╛рджрд╛рдпреА рдЫ рд░ рд╣рд╛рдореАрд▓реЗ рдкрдирд┐ рдЖрдлреНрдиреИ рджреЗрд╢рдорд╛ рдХреЗрд╣реА рдирдпрд╛рдБ рдЙрджреНрдпрдо рдЧрд░реНрдиреЗ рд╕реЛрдЪреНрдиреБрдкрд░реНрдЫ рднрдиреНрдиреЗ рд╕рдиреНрджреЗрд╢ рджрд┐рдиреНрдЫред` }
        ];
        const flashcardsDataEn = [
            { id: "en0", chapterName: "The Half-closed Eyes of the Buddha and the Slowly Sinking Sun", author: "Sankhar Lamichhane", characters: ["Foreign Tourist", "Nepali Guide", "Farmer's Family", "Paralyzed boy"], summary: `The story contrasts the perspectives of a Western tourist and a Nepali guide in Kathmandu Valley. The tourist, initially enchanted by Nepal's rich culture, religion, and welcoming people, sees only the idealized, peaceful image. The guide, however, takes the tourist to the hills to reveal the poverty and sorrow that coexist within this culturally rich country. The story employs a stream of consciousness technique, focusing on the characters' inner thoughts and feelings rather than actions. The central motif is "eyes," used to symbolize different perspectives and realities - from the welcoming eyes of Buddha to the sorrowful eyes of a paralyzed boy.` },
            { id: "en1", chapterName: "A Very Old Man with Enormous Wings", author: "Gabriel Garcia Marquez", characters: ["Pelayo", "Elisenda", "Neighbor woman", "Father Gonzaga", "Old winged man (Angel)", "Spider-Girl"], summary: `Pelayo and Elisenda find an old winged man in their courtyard after a storm. The neighbor woman declares him an angel. They keep him in a chicken coop, and he becomes a spectacle for the town, exploited for money. Father Gonzaga questions his authenticity. When a Spider-Girl arrives, the crowd's attention shifts. The angel is neglected, becomes part of their lives, then eventually flies away. The story examines human responses to the weak, different, and dependent, highlighting curiosity, greed, and cruelty. It is a magical realist story where fantastical elements are placed in a mundane, realistic setting.` },
            { id: "en2", chapterName: "Human Rights and the age of Inequality", author: "Samuel Moyn", characters: ["(No narrative characters, uses King Croesus, mentions Roosevelt)"], summary: `The presentation defines human rights and inequality, exploring the egalitarian principle and its types (economic, political, legal, racial, gender, moral). It uses the story of King Croesus to illustrate inequality and discusses the historical context of human rights, particularly in the 1940s and post-WWII era, focusing on Roosevelt's "Second Bill of Rights." It links human rights to political economy and questions whether a new human rights movement is needed to address contemporary inequality, suggesting redistribution of resources and fair laws.` },
            { id: "en3", chapterName: "Soft Storm", author: "Abhi Subedi", characters: ["Speaker (Poetic Persona/Narrator)"], summary: `The poem "Soft Storm" uses the speaker's journey through Kathmandu at night as a metaphor for the social and political turmoil in Nepalese society. The speaker, a rebel against societal misleading, describes the "tumult atmosphere, and anarchy." The poem blends natural imagery with social commentary, depicting scenes of poverty, indifference, and social malpractices alongside fleeting moments of beauty and hope. The "soft storm" symbolizes a gentle yet persistent rebellion against injustice.` },
            { id: "en4", chapterName: "Humility", author: "Yuval Noah Harari", characters: ["(No narrative characters)"], summary: `The presentation explores the concept of humility as discussed by Yuval Noah Harari. It argues that everyone believes themselves to be the center of the universe and claims superiority based on religion, nationality, race, etc. Harari criticizes these claims as false and rooted in ignorance and racism. He emphasizes that true humility, recognizing the equal value of all humanity, is essential for progress and peace. Humility is presented as the antidote to humanity's illusions of superiority and mastery, promoting respect for other cultures and traditions.` },
            { id: "en5", chapterName: "The Awakening Age", author: "Ben Okri", characters: ["(Addresses Africans/people generally)"], summary: `"The Awakening Age" calls for unity, peace, and solidarity among people worldwide, especially Africans. The poem uses imagery of travel and connection ("meridian line," "mountain rope") to emphasize the shared human experience and hope for a better future. It acknowledges the hardships faced by Africans ("poverty's rage") but expresses optimism for an "awakening age" characterized by prosperity, equality, and brotherhood. The poem urges readers to change perceptions and embrace unity over division.` },
            { id: "en6", chapterName: "I Was My Own Route", author: "Julia de Burgos", characters: ["Speaker (Poetic Persona/Narrator)"], summary: `"I Was My Own Route" is a feminist poem challenging patriarchal ideologies and societal expectations placed on women. The speaker rejects the labels and standards imposed by men, choosing to forge her own path to freedom and self-identity. The poem depicts a journey of liberation, overcoming obstacles ("old guard") and achieving "intimate liberation." It emphasizes courage, decisiveness, and the rejection of male domination in pursuit of female autonomy.` },
            { id: "en7", chapterName: "Every Morning I wake", author: "Dylan Thomas", characters: ["Speaker (representing inhabitants of Milk Wood)", "God"], summary: `"Every Morning I Wake" is a prayer to God from Dylan Thomas's play Under Milk Wood. The speaker, representing the ordinary inhabitants of Milk Wood, pleads for God's mercy, compassion, and protection. It acknowledges human vulnerability ("poor creatures born to die") and the uncertainty of life ("touch-and-go"). The poem expresses deep faith and gratitude towards God, portraying Him as the ultimate source of blessing and the only one who truly sees our best selves.` },
            { id: "en8", chapterName: "A Day", author: "Emily Dickinson", characters: ["Dominie (Symbolic figure of death/guide)"], summary: `"A Day" uses the cycle of sunrise and sunset to symbolize the transition from life to death. The poem progresses from the joyful, innocent perception of sunrise as "ribbons" and "squirrels" (childlike view of life's beauty) to a more somber and uncertain depiction of sunset as a "purple stile" and a "Dominie in gray" leading a "flock away" (metaphor for death and the afterlife). It explores the beauty of life, the mystery of death, and the transition between them through vivid imagery, symbolism (sunrays, stile, Dominie), metaphor, personification, and simile.` },
            { id: "en9", chapterName: "On Libraries", author: "Oliver Sacks", characters: ["Oliver Sacks (as narrator/protagonist)", "Father (of Oliver Sacks)"], summary: `Oliver Sacks's essay "On Libraries" is a nostalgic reflection on his lifelong love of libraries and physical books. He recounts his childhood spent in his father's library and the Willesden Public Library, emphasizing the intellectual freedom and joy of discovery he found there. He contrasts this with the shift in the 1990s when libraries began disposing of physical books in favor of digital resources, a change he deeply laments. He argues for the irreplaceable value of physical books, emphasizing their sensory qualities and the unique atmosphere of libraries.` },
            { id: "en10", chapterName: "My Old Home", author: "Lu Xun", characters: ["Narrator", "Runtu (Childhood friend)"], summary: `"My Old Home" explores the narrator's return to his childhood home after 30 years and his encounter with his childhood friend Runtu. The story contrasts idealized memories of childhood with the harsh realities of the present. The narrator finds his old home desolate and Runtu transformed by hardship and social class divisions, symbolized by Runtu addressing him as "Master." The story examines themes of friendship, memory vs. reality, childhood innocence lost to social and economic realities, and the rigid class structure of early 20th century China.` },
            { id: "en11", chapterName: "A Matter of Husbands", author: "Ferenc Molnar", characters: ["Ernest Woman", "Famous Actress", "Husband (lawyer, husband of Ernest Woman)"], summary: `"A Matter of Husbands" is a comedic one-act play revolving around an Ernest Woman who suspects her lawyer husband of having an affair with a Famous Actress. When she confronts the actress, the Famous Actress cleverly manipulates her, claiming the affair is a ruse by the husband to rekindle his wife's love through jealousy. The Ernest Woman is convinced and leaves, only for the play to reveal the actress and the husband are indeed having an affair, highlighting irony and deception. The play features only two female characters and explores themes of marital relationships, appearances vs. reality, and the manipulative nature of some individuals.` },
            { id: "en12", chapterName: "The Bull", author: "Bhimnidhi Tiwari", characters: ["Laxminarayan (Bull doctor)", "Jitman (Cowherd)", "Gore (Cowherd)", "King Rana Bahadur Shah (Mentioned)"], summary: `"The Bull" is a one-act drama denouncing the feudal structure of 18th-century Nepali society. The play centers on the death of King Rana Bahadur Shah's bull, Male, and the fear and horror it instills in three characters: the bull doctor Laxminarayan and cowherds Jitman and Gore. The characters fear the king's wrath due to the bull's death, highlighting the absolute power of the monarchy and the dehumanization of common people. The play explores themes of monarchical power, feudalism, dehumanization, class difference, and the struggle for survival in a rigid social hierarchy.` },
            { id: "en13", chapterName: "A Respectable Woman", author: "Kate Chopin", characters: ["Mrs. Baroda", "Gouvernail (Husband's friend)", "Husband (of Mrs. Baroda)"], summary: `"A Respectable Woman" explores the inner conflict of Mrs. Baroda, a woman adhering to 19th-century societal expectations of a "respectable woman." When her husband invites his friend Gouvernail to stay, Mrs. Baroda finds herself unexpectedly attracted to him, disrupting her mental peace. The story traces her internal struggle between her social duty as a respectable wife and her burgeoning physical desires. She ultimately flees to her aunt's house to avoid temptation, highlighting the limitations and repressions placed upon women in that era.` },
            { id: "en14", chapterName: "The Treasure in the Forest", author: "Herbert George Wells (H.G. Wells)", characters: ["Evans", "Hooker"], summary: `"The Treasure in the Forest" is a cautionary tale about greed and its destructive consequences. Two men, Evans and Hooker, seek buried treasure on a tropical island, guided by a stolen map. Driven by greed, they disregard warnings and danger, eventually finding poisoned gold. They are fatally poisoned by thorns embedded in the treasure, highlighting the moral justice of the story. The story uses elements of adventure and suspense to explore themes of greed, moral justice, consequences of unchecked ambition, and the corrupting influence of wealth.` },
            { id: "en15", chapterName: "Neighbors", author: "Tim Winton", characters: ["Newlywed couple", "Neighbors (European migrants)"], summary: `"Neighbors" tells the story of a newlywed couple who move to a multicultural suburb inhabited by European migrants. Initially, they are annoyed and prejudiced by their noisy and intrusive neighbors, valuing their privacy and selfhood above all else. Over the course of a year, through the changing seasons, they gradually experience the unexpected kindness and generosity of their neighbors, who help them with gardening, building a henhouse, and during the wife's pregnancy and childbirth. The story explores the breakdown of cultural and linguistic barriers through acts of compassion and community, highlighting the importance of human connection over individualism.` }
        ];


        // --- State Variables ---
        let currentCardIndex = 0;
        let currentLanguage = 'ne'; // Default language
        let activeFlashcardsData = flashcardsDataNe; // Active dataset based on language
        let cards = []; // Array to hold the currently active and shuffled cards
        let isAudioReady = false; // Flag to check if Tone.js audio context is started
        let isAnswerVisible = false; // Track if answer/summary is currently shown
        let currentShowMode = 'authorChars'; // 'authorChars' or 'summary'
        let favoritedCards = new Set(); // Set to store IDs of favorited cards

        // --- DOM Element References ---
        const cardBody = document.getElementById('card-body');
        const cardCounter = document.getElementById('card-counter');
        const langNeButton = document.getElementById('lang-ne');
        const langEnButton = document.getElementById('lang-en');
        const showModeRadios = document.querySelectorAll('input[name="showMode"]');
        const hintButton = document.getElementById('hint-button');
        const starButton = document.getElementById('star-button');
        const fullscreenButton = document.getElementById('fullscreen-button');
        // New confidence buttons
        const confidenceControls = document.getElementById('confidence-controls');
        const tryAgainButton = document.getElementById('try-again-button');
        const confidentButton = document.getElementById('confident-button');

        // --- Tone.js Synths Setup ---
        const flipSynth = new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.01, decay: 0.1, sustain: 0.05, release: 0.2 } }).toDestination();
        const nextSynth = new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.005, decay: 0.05, sustain: 0.01, release: 0.1 } }).toDestination();
        const uiSynth = new Tone.Synth({ oscillator: { type: 'square' }, envelope: { attack: 0.005, decay: 0.05, sustain: 0.01, release: 0.1 } }).toDestination(); // For general UI clicks

        // --- Core Functions ---

        /**
         * Starts the Tone.js audio context if not already started.
         * Required to be called once after user interaction.
         */
        async function startAudio() {
             if (!isAudioReady) {
                 try {
                    await Tone.start();
                    console.log('Audio context started');
                    isAudioReady = true;
                 } catch (error) {
                    console.error("Error starting audio context:", error);
                    // Optionally disable audio features if context fails
                 }
             }
        }

        /**
         * Plays a sound effect using a specified Tone.js synth.
         * @param {Tone.Synth} synth - The synth instance to use.
         * @param {string} [note='C4'] - The note to play (e.g., 'C4', 'E#5').
         * @param {string} [duration='8n'] - The duration of the note (e.g., '8n', '16n').
         */
        function playSound(synth, note = 'C4', duration = '8n') {
             if (!isAudioReady) return; // Don't play if audio not ready
             try {
                 synth.triggerAttackRelease(note, duration);
             } catch (error) {
                 console.error("Error playing sound:", error);
             }
        }

        /**
         * Updates the card display to show the current question (chapter name).
         * Handles index wrapping and updates the counter and star button.
         */
        function displayCard() {
            if (cards.length === 0) {
                // Handle case where there are no cards (e.g., after filtering or error)
                cardBody.textContent = "No cards available for this selection.";
                cardCounter.textContent = "0 / 0";
                starButton.classList.remove('favorited');
                confidenceControls.style.display = 'none'; // Ensure confidence buttons are hidden
                return;
            }

            // Ensure index is within bounds (useful after removing cards)
            currentCardIndex = (currentCardIndex + cards.length) % cards.length;

            const currentCard = cards[currentCardIndex];
            isAnswerVisible = false; // Reset state: show question first

            // Display Question (Chapter Name)
            cardBody.textContent = currentCard.chapterName;
            cardBody.classList.remove('answer-visible', 'summary-view'); // Reset view classes

            // Hide confidence buttons when showing question
            confidenceControls.style.display = 'none';

            // Update Counter
            const counterPrefix = currentLanguage === 'ne' ? 'рдХрд╛рд░реНрдб' : 'Card';
            cardCounter.textContent = `${currentCardIndex + 1} / ${cards.length}`;

            // Update Star Button state based on whether the current card is favorited
            starButton.classList.toggle('favorited', favoritedCards.has(currentCard.id));
        }

        /**
         * Shows the Answer (Author/Characters) or Summary based on the currentShowMode.
         * Reveals the confidence buttons.
         */
        function showAnswerOrSummary() {
            if (cards.length === 0 || isAnswerVisible) return; // Don't do anything if no cards or answer already visible

            const currentCard = cards[currentCardIndex];
            isAnswerVisible = true;
            cardBody.classList.add('answer-visible'); // Apply common style for revealed content

            // Display content based on the selected mode
            if (currentShowMode === 'summary') {
                // Display Summary
                cardBody.textContent = currentCard.summary || "Summary not available."; // Use textContent for pre-wrap
                cardBody.classList.add('summary-view'); // Add specific summary styling
            } else {
                // Display Author & Characters
                cardBody.classList.remove('summary-view'); // Ensure summary style is removed
                let backHtml = `<strong>Author:</strong> ${currentCard.author}<br><br>`;
                backHtml += `<strong>Main Characters/Topic:</strong>`;
                // Check if characters data exists and is meaningful
                if (Array.isArray(currentCard.characters) && currentCard.characters.length > 0 && currentCard.characters[0] !== "Not applicable (Topic-based)" && currentCard.characters[0] !== "(No narrative characters)") {
                    backHtml += `<ul>`;
                    currentCard.characters.forEach(char => { backHtml += `<li>${char}</li>`; });
                    backHtml += `</ul>`;
                } else if (currentCard.characters && typeof currentCard.characters === 'string' && currentCard.characters.trim() !== "") {
                     // Handle cases where characters might be a single string
                     backHtml += ` ${currentCard.characters}`;
                } else if (Array.isArray(currentCard.characters) && currentCard.characters.length > 0) {
                     // Handle cases like "(No narrative characters)" as a single item array
                     backHtml += ` ${currentCard.characters[0]}`;
                }
                 else {
                     backHtml += ` N/A`; // Fallback if no character info
                 }
                cardBody.innerHTML = backHtml; // Use innerHTML for Author/Chars formatting
            }

            // Show confidence buttons
            confidenceControls.style.display = 'flex';

            playSound(flipSynth, 'E4', '16n'); // Play sound on reveal
        }

        /**
         * Toggles the view between Question and Answer/Summary.
         */
        function toggleQuestionAnswer() {
            startAudio(); // Ensure audio is ready on interaction
            if (isAnswerVisible) {
                displayCard(); // Go back to showing the question
            } else {
                showAnswerOrSummary(); // Show the answer/summary
            }
        }

        // --- Navigation and Confidence Logic ---

        /**
         * Moves to the next card in the sequence.
         * Called by confidence buttons or potentially manual navigation if added back.
         */
        function goToNextCard() {
            if (cards.length === 0) return; // Nothing to navigate to
            currentCardIndex++; // Increment index
            // displayCard will handle wrapping and showing the new card
            displayCard();
        }

        /**
         * Handles the "Try Again" button click.
         * Simply moves to the next card, keeping the current card in rotation.
         */
        function handleTryAgain() {
            startAudio();
            console.log("Try Again selected for card:", cards.length > 0 ? cards[currentCardIndex].id : 'N/A');
            goToNextCard(); // Move to the next card
            playSound(nextSynth, 'C4', '16n'); // Lower sound for 'Try Again'
        }

        /**
         * Handles the "I'm Confident" button click.
         * Moves to the next card. (Future enhancement: Could remove the card or use spaced repetition).
         */
        function handleConfident() {
            startAudio();
            console.log("Confident selected for card:", cards.length > 0 ? cards[currentCardIndex].id : 'N/A');
            // --- Simple Logic: Just move to the next card ---
            goToNextCard();

            // --- Example: More complex logic (remove card from session) ---
            /*
            if (cards.length > 0) {
                const completedCard = cards.splice(currentCardIndex, 1)[0];
                console.log("Card marked confident and removed:", completedCard.id);
                if (cards.length === 0) {
                    cardBody.textContent = "Congratulations! All cards reviewed.";
                    cardCounter.textContent = "Done!";
                    confidenceControls.style.display = 'none';
                    starButton.classList.remove('favorited');
                    return; // Exit function early
                }
                // If not the last card, the index effectively points to the next one.
                // If it WAS the last card, wrap the index.
                if (currentCardIndex >= cards.length) {
                    currentCardIndex = 0;
                }
                displayCard(); // Display the new current card
            }
            */
            // --- End Example ---

            playSound(nextSynth, 'G4', '16n'); // Higher sound for 'Confident'
        }


        // --- Utility Functions ---

        /**
         * Shuffles the currently active flashcard data array in place.
         */
        function shuffleCards() {
             startAudio(); // Ensure audio context
             cards = [...activeFlashcardsData]; // Create a copy to shuffle
             let i = cards.length, j, temp;
             if (i === 0) return; // No cards to shuffle
             while (--i > 0) {
                 j = Math.floor(Math.random() * (i + 1));
                 temp = cards[i];
                 cards[i] = cards[j];
                 cards[j] = temp;
             }
             currentCardIndex = 0; // Reset index to the beginning
             displayCard(); // Display the first card of the shuffled deck
             console.log(`Cards shuffled for lang: ${currentLanguage}`);
             playSound(uiSynth, 'A4', '8n'); // Sound for shuffle action
        }

        /**
         * Sets the active language, updates UI buttons, loads data, and shuffles.
         * @param {string} lang - The language code ('ne' or 'en').
         */
        function setLanguage(lang) {
            startAudio(); // Ensure audio context
            currentLanguage = lang;
            activeFlashcardsData = (lang === 'ne') ? flashcardsDataNe : flashcardsDataEn;

            // Update active state of language buttons
            langNeButton.classList.toggle('active', lang === 'ne');
            langEnButton.classList.toggle('active', lang === 'en');

            shuffleCards(); // Shuffle the new dataset and display the first card
            playSound(uiSynth, 'E5', '16n'); // Sound for language change
        }

        /**
         * Sets the display mode for the back of the card (Author/Chars or Summary).
         * @param {string} mode - The mode ('authorChars' or 'summary').
         */
        function setShowMode(mode) {
            startAudio(); // Ensure audio context
            currentShowMode = mode;
            console.log("Show mode set to:", mode);
            // If the answer is currently visible, immediately update the display
            if (isAnswerVisible) {
                showAnswerOrSummary();
            }
            playSound(uiSynth, 'F#4', '16n'); // Sound for mode change
        }


        // --- Placeholder/Simple Functions ---

        /** Placeholder for hint functionality */
        function getHint() {
            startAudio();
            console.log("Hint requested for card:", cards.length > 0 ? cards[currentCardIndex].id : 'N/A');
            alert("Hint functionality is not yet implemented."); // Simple alert for now
            playSound(uiSynth, 'B4', '8n');
        }

        /** Toggles the favorite status of the current card */
        function toggleFavorite() {
            startAudio();
            if (cards.length === 0) return; // No card to favorite
            const currentCardId = cards[currentCardIndex].id;
            if (favoritedCards.has(currentCardId)) {
                favoritedCards.delete(currentCardId);
                starButton.classList.remove('favorited');
                console.log("Removed from favorites:", currentCardId);
            } else {
                favoritedCards.add(currentCardId);
                starButton.classList.add('favorited');
                console.log("Added to favorites:", currentCardId);
            }
            // Optional: Save favorites to localStorage for persistence
            playSound(flipSynth, 'C5', '16n'); // Sound for favoriting
        }

        /** Toggles fullscreen mode */
        function toggleFullscreen() {
             startAudio();
             console.log("Fullscreen toggled");
             if (!document.fullscreenElement) {
                 document.documentElement.requestFullscreen()
                    .then(() => playSound(uiSynth, 'A4', '8n'))
                    .catch(err => {
                         console.error(`Fullscreen error: ${err.message}`, err);
                         alert(`Could not enter fullscreen mode: ${err.message}`);
                     });
             } else {
                 if (document.exitFullscreen) {
                     document.exitFullscreen()
                        .then(() => playSound(uiSynth, 'G4', '8n'))
                        .catch(err => console.error("Error exiting fullscreen:", err));
                 }
             }
        }


        // --- Event Listeners ---
        // Click on card body to flip between question and answer
        cardBody.addEventListener('click', toggleQuestionAnswer);

        // Language selection buttons
        langNeButton.addEventListener('click', () => setLanguage('ne'));
        langEnButton.addEventListener('click', () => setLanguage('en'));

        // Show Mode (Author/Chars vs Summary) radio buttons
        showModeRadios.forEach(radio => {
            radio.addEventListener('change', (event) => {
                if (event.target.checked) { // Ensure it's the selected radio
                     setShowMode(event.target.value);
                }
            });
        });

        // Header buttons
        hintButton.addEventListener('click', getHint);
        starButton.addEventListener('click', toggleFavorite);

        // Footer buttons
        fullscreenButton.addEventListener('click', toggleFullscreen);
        tryAgainButton.addEventListener('click', handleTryAgain);
        confidentButton.addEventListener('click', handleConfident);

        // Keyboard navigation (Optional Enhancement)
        document.addEventListener('keydown', (event) => {
            startAudio(); // Ensure audio context on key press
            if (cards.length === 0) return; // Ignore if no cards

            if (event.key === ' ' || event.key === 'Enter') { // Space or Enter to flip
                event.preventDefault(); // Prevent default space scroll
                toggleQuestionAnswer();
            } else if (isAnswerVisible) {
                 if (event.key === 'ArrowLeft' || event.key === '1') { // Left arrow or '1' for Try Again
                    handleTryAgain();
                 } else if (event.key === 'ArrowRight' || event.key === '2') { // Right arrow or '2' for Confident
                    handleConfident();
                 }
            }
            // Add ArrowLeft/Right for prev/next card when question is shown?
            // else if (!isAnswerVisible) {
            //     if (event.key === 'ArrowRight') { goToNextCard(); playSound(nextSynth, 'G4', '16n'); }
            //     if (event.key === 'ArrowLeft') { /* Implement prevCard if needed */ }
            // }
        });


        // --- Initial Load ---
        // Set default language ('ne'), which also shuffles and displays the first card.
        setLanguage('ne');

    </script>

</body>
</html>
